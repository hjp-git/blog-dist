<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js 简介 | 自闭新青年</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog-dist/assets/img/favicon.ico">
    <link rel="stylesheet" href="/blog-dist/icon/iconfont.css">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/blog-dist/js/dianji.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>
    <meta name="description" content="学如逆水行舟,不进则退">
    <meta name="keywords" content="自闭新青年">
    
    <link rel="preload" href="/blog-dist/assets/css/0.styles.2127079e.css" as="style"><link rel="preload" href="/blog-dist/assets/js/app.19fb868c.js" as="script"><link rel="preload" href="/blog-dist/assets/js/3.3680e638.js" as="script"><link rel="preload" href="/blog-dist/assets/js/1.8bc37690.js" as="script"><link rel="preload" href="/blog-dist/assets/js/145.b31bc4ce.js" as="script"><link rel="prefetch" href="/blog-dist/assets/js/10.5807ecad.js"><link rel="prefetch" href="/blog-dist/assets/js/100.566eb19f.js"><link rel="prefetch" href="/blog-dist/assets/js/101.a46d3a45.js"><link rel="prefetch" href="/blog-dist/assets/js/102.fc643543.js"><link rel="prefetch" href="/blog-dist/assets/js/103.e5d0507f.js"><link rel="prefetch" href="/blog-dist/assets/js/104.94fd590d.js"><link rel="prefetch" href="/blog-dist/assets/js/105.0a5d6fb5.js"><link rel="prefetch" href="/blog-dist/assets/js/106.a7e10bbc.js"><link rel="prefetch" href="/blog-dist/assets/js/107.34becf5c.js"><link rel="prefetch" href="/blog-dist/assets/js/108.f684d674.js"><link rel="prefetch" href="/blog-dist/assets/js/109.da6a0a85.js"><link rel="prefetch" href="/blog-dist/assets/js/11.2f72a325.js"><link rel="prefetch" href="/blog-dist/assets/js/110.ea078308.js"><link rel="prefetch" href="/blog-dist/assets/js/111.69ee7bb4.js"><link rel="prefetch" href="/blog-dist/assets/js/112.3749fa70.js"><link rel="prefetch" href="/blog-dist/assets/js/113.659567f6.js"><link rel="prefetch" href="/blog-dist/assets/js/114.5a7bac22.js"><link rel="prefetch" href="/blog-dist/assets/js/115.34c72648.js"><link rel="prefetch" href="/blog-dist/assets/js/116.6c5fbf26.js"><link rel="prefetch" href="/blog-dist/assets/js/117.fe476192.js"><link rel="prefetch" href="/blog-dist/assets/js/118.9a087933.js"><link rel="prefetch" href="/blog-dist/assets/js/119.c89491c0.js"><link rel="prefetch" href="/blog-dist/assets/js/12.9eabbedf.js"><link rel="prefetch" href="/blog-dist/assets/js/120.ba724d6f.js"><link rel="prefetch" href="/blog-dist/assets/js/121.8663f64a.js"><link rel="prefetch" href="/blog-dist/assets/js/122.f31c4690.js"><link rel="prefetch" href="/blog-dist/assets/js/123.4b7529ea.js"><link rel="prefetch" href="/blog-dist/assets/js/124.2c14987f.js"><link rel="prefetch" href="/blog-dist/assets/js/125.08d3186e.js"><link rel="prefetch" href="/blog-dist/assets/js/126.46c79c13.js"><link rel="prefetch" href="/blog-dist/assets/js/127.19e0157c.js"><link rel="prefetch" href="/blog-dist/assets/js/128.fedb535e.js"><link rel="prefetch" href="/blog-dist/assets/js/129.1953aa4a.js"><link rel="prefetch" href="/blog-dist/assets/js/13.2a1af037.js"><link rel="prefetch" href="/blog-dist/assets/js/130.b9ff7ef2.js"><link rel="prefetch" href="/blog-dist/assets/js/131.3e99f943.js"><link rel="prefetch" href="/blog-dist/assets/js/132.ae5a57be.js"><link rel="prefetch" href="/blog-dist/assets/js/133.7034fed4.js"><link rel="prefetch" href="/blog-dist/assets/js/134.7098e05d.js"><link rel="prefetch" href="/blog-dist/assets/js/135.db9c2f16.js"><link rel="prefetch" href="/blog-dist/assets/js/136.9b78fd54.js"><link rel="prefetch" href="/blog-dist/assets/js/137.aaf3dc50.js"><link rel="prefetch" href="/blog-dist/assets/js/138.fe84298f.js"><link rel="prefetch" href="/blog-dist/assets/js/139.262fed70.js"><link rel="prefetch" href="/blog-dist/assets/js/14.191c399a.js"><link rel="prefetch" href="/blog-dist/assets/js/140.d10690a5.js"><link rel="prefetch" href="/blog-dist/assets/js/141.7bd00bc8.js"><link rel="prefetch" href="/blog-dist/assets/js/142.8757d9cb.js"><link rel="prefetch" href="/blog-dist/assets/js/143.b5484394.js"><link rel="prefetch" href="/blog-dist/assets/js/144.3e2b55b4.js"><link rel="prefetch" href="/blog-dist/assets/js/146.9a0e1311.js"><link rel="prefetch" href="/blog-dist/assets/js/147.b5f49218.js"><link rel="prefetch" href="/blog-dist/assets/js/148.e7064017.js"><link rel="prefetch" href="/blog-dist/assets/js/149.15b1ddd6.js"><link rel="prefetch" href="/blog-dist/assets/js/15.503f66ef.js"><link rel="prefetch" href="/blog-dist/assets/js/150.c6f2f88d.js"><link rel="prefetch" href="/blog-dist/assets/js/151.f9930fb5.js"><link rel="prefetch" href="/blog-dist/assets/js/152.64b2c346.js"><link rel="prefetch" href="/blog-dist/assets/js/153.4340338b.js"><link rel="prefetch" href="/blog-dist/assets/js/154.823ca6cb.js"><link rel="prefetch" href="/blog-dist/assets/js/155.181913c4.js"><link rel="prefetch" href="/blog-dist/assets/js/156.de420466.js"><link rel="prefetch" href="/blog-dist/assets/js/157.76c231bc.js"><link rel="prefetch" href="/blog-dist/assets/js/158.26ab98cc.js"><link rel="prefetch" href="/blog-dist/assets/js/159.d1c5c980.js"><link rel="prefetch" href="/blog-dist/assets/js/16.fec84598.js"><link rel="prefetch" href="/blog-dist/assets/js/160.fd191611.js"><link rel="prefetch" href="/blog-dist/assets/js/161.2db2d462.js"><link rel="prefetch" href="/blog-dist/assets/js/162.5c6a5860.js"><link rel="prefetch" href="/blog-dist/assets/js/163.68f3ed16.js"><link rel="prefetch" href="/blog-dist/assets/js/164.3a38a018.js"><link rel="prefetch" href="/blog-dist/assets/js/165.e16b2683.js"><link rel="prefetch" href="/blog-dist/assets/js/166.76df9588.js"><link rel="prefetch" href="/blog-dist/assets/js/167.174493b9.js"><link rel="prefetch" href="/blog-dist/assets/js/168.331987f3.js"><link rel="prefetch" href="/blog-dist/assets/js/169.248c5107.js"><link rel="prefetch" href="/blog-dist/assets/js/17.3576e4da.js"><link rel="prefetch" href="/blog-dist/assets/js/170.e1839ecc.js"><link rel="prefetch" href="/blog-dist/assets/js/171.26cb668d.js"><link rel="prefetch" href="/blog-dist/assets/js/172.4a618b5d.js"><link rel="prefetch" href="/blog-dist/assets/js/173.97ca6400.js"><link rel="prefetch" href="/blog-dist/assets/js/174.0bcb4261.js"><link rel="prefetch" href="/blog-dist/assets/js/175.92783c15.js"><link rel="prefetch" href="/blog-dist/assets/js/176.60d809da.js"><link rel="prefetch" href="/blog-dist/assets/js/177.6725bf27.js"><link rel="prefetch" href="/blog-dist/assets/js/178.60804cf2.js"><link rel="prefetch" href="/blog-dist/assets/js/179.c7aa850f.js"><link rel="prefetch" href="/blog-dist/assets/js/18.314a259b.js"><link rel="prefetch" href="/blog-dist/assets/js/180.f6519ad0.js"><link rel="prefetch" href="/blog-dist/assets/js/181.cf725dca.js"><link rel="prefetch" href="/blog-dist/assets/js/182.29ee8de3.js"><link rel="prefetch" href="/blog-dist/assets/js/183.5d3a4c7a.js"><link rel="prefetch" href="/blog-dist/assets/js/184.d5599507.js"><link rel="prefetch" href="/blog-dist/assets/js/185.b336f835.js"><link rel="prefetch" href="/blog-dist/assets/js/186.ff020b43.js"><link rel="prefetch" href="/blog-dist/assets/js/187.892feb98.js"><link rel="prefetch" href="/blog-dist/assets/js/188.ec4c862a.js"><link rel="prefetch" href="/blog-dist/assets/js/189.fd899c2d.js"><link rel="prefetch" href="/blog-dist/assets/js/19.95ce72b8.js"><link rel="prefetch" href="/blog-dist/assets/js/190.ac055115.js"><link rel="prefetch" href="/blog-dist/assets/js/191.8c8bc24a.js"><link rel="prefetch" href="/blog-dist/assets/js/192.0141007d.js"><link rel="prefetch" href="/blog-dist/assets/js/193.2874258d.js"><link rel="prefetch" href="/blog-dist/assets/js/194.cc172c32.js"><link rel="prefetch" href="/blog-dist/assets/js/195.7729ea1b.js"><link rel="prefetch" href="/blog-dist/assets/js/196.c500cd71.js"><link rel="prefetch" href="/blog-dist/assets/js/197.6e882bff.js"><link rel="prefetch" href="/blog-dist/assets/js/198.09ebc710.js"><link rel="prefetch" href="/blog-dist/assets/js/199.32907fb4.js"><link rel="prefetch" href="/blog-dist/assets/js/20.22649858.js"><link rel="prefetch" href="/blog-dist/assets/js/200.01687092.js"><link rel="prefetch" href="/blog-dist/assets/js/201.4873e6da.js"><link rel="prefetch" href="/blog-dist/assets/js/202.20aef9ca.js"><link rel="prefetch" href="/blog-dist/assets/js/203.fd020c34.js"><link rel="prefetch" href="/blog-dist/assets/js/204.c50ebd71.js"><link rel="prefetch" href="/blog-dist/assets/js/205.a56070a5.js"><link rel="prefetch" href="/blog-dist/assets/js/206.e9f00ee7.js"><link rel="prefetch" href="/blog-dist/assets/js/207.945a83a9.js"><link rel="prefetch" href="/blog-dist/assets/js/208.1ecec20e.js"><link rel="prefetch" href="/blog-dist/assets/js/209.5ef95e3d.js"><link rel="prefetch" href="/blog-dist/assets/js/21.1a3ebffb.js"><link rel="prefetch" href="/blog-dist/assets/js/210.98e92a74.js"><link rel="prefetch" href="/blog-dist/assets/js/211.67f27242.js"><link rel="prefetch" href="/blog-dist/assets/js/212.ff218b18.js"><link rel="prefetch" href="/blog-dist/assets/js/213.fbc481d9.js"><link rel="prefetch" href="/blog-dist/assets/js/214.685a4cc1.js"><link rel="prefetch" href="/blog-dist/assets/js/215.d97cdcfa.js"><link rel="prefetch" href="/blog-dist/assets/js/216.8fb91f40.js"><link rel="prefetch" href="/blog-dist/assets/js/217.0730ae86.js"><link rel="prefetch" href="/blog-dist/assets/js/218.55c43c7d.js"><link rel="prefetch" href="/blog-dist/assets/js/219.1cc7821c.js"><link rel="prefetch" href="/blog-dist/assets/js/22.c3965f93.js"><link rel="prefetch" href="/blog-dist/assets/js/220.aa5a349d.js"><link rel="prefetch" href="/blog-dist/assets/js/221.5c2cdaae.js"><link rel="prefetch" href="/blog-dist/assets/js/222.74455724.js"><link rel="prefetch" href="/blog-dist/assets/js/223.468628cd.js"><link rel="prefetch" href="/blog-dist/assets/js/224.467f5440.js"><link rel="prefetch" href="/blog-dist/assets/js/225.78a39e69.js"><link rel="prefetch" href="/blog-dist/assets/js/226.1cbe3178.js"><link rel="prefetch" href="/blog-dist/assets/js/227.e9cbf092.js"><link rel="prefetch" href="/blog-dist/assets/js/228.168a14a5.js"><link rel="prefetch" href="/blog-dist/assets/js/229.570b0744.js"><link rel="prefetch" href="/blog-dist/assets/js/23.dd0fa78e.js"><link rel="prefetch" href="/blog-dist/assets/js/230.0aa7a060.js"><link rel="prefetch" href="/blog-dist/assets/js/231.42fc8976.js"><link rel="prefetch" href="/blog-dist/assets/js/232.64963664.js"><link rel="prefetch" href="/blog-dist/assets/js/233.db64d301.js"><link rel="prefetch" href="/blog-dist/assets/js/234.b16e9721.js"><link rel="prefetch" href="/blog-dist/assets/js/235.97e734d6.js"><link rel="prefetch" href="/blog-dist/assets/js/236.8c1c2916.js"><link rel="prefetch" href="/blog-dist/assets/js/237.bbef8399.js"><link rel="prefetch" href="/blog-dist/assets/js/238.2c42d42b.js"><link rel="prefetch" href="/blog-dist/assets/js/239.12cdfd37.js"><link rel="prefetch" href="/blog-dist/assets/js/24.b18e1294.js"><link rel="prefetch" href="/blog-dist/assets/js/240.1d503985.js"><link rel="prefetch" href="/blog-dist/assets/js/241.2850beba.js"><link rel="prefetch" href="/blog-dist/assets/js/242.c92d8dc9.js"><link rel="prefetch" href="/blog-dist/assets/js/243.10422905.js"><link rel="prefetch" href="/blog-dist/assets/js/244.7cc75ffc.js"><link rel="prefetch" href="/blog-dist/assets/js/245.2c2e3e8a.js"><link rel="prefetch" href="/blog-dist/assets/js/246.57561823.js"><link rel="prefetch" href="/blog-dist/assets/js/247.0968e149.js"><link rel="prefetch" href="/blog-dist/assets/js/248.6fbf4e38.js"><link rel="prefetch" href="/blog-dist/assets/js/249.b0e76e91.js"><link rel="prefetch" href="/blog-dist/assets/js/25.8ca48b97.js"><link rel="prefetch" href="/blog-dist/assets/js/250.17b57277.js"><link rel="prefetch" href="/blog-dist/assets/js/251.559386e2.js"><link rel="prefetch" href="/blog-dist/assets/js/252.4bb9f075.js"><link rel="prefetch" href="/blog-dist/assets/js/253.ec9da833.js"><link rel="prefetch" href="/blog-dist/assets/js/254.f83649d6.js"><link rel="prefetch" href="/blog-dist/assets/js/255.65a6430e.js"><link rel="prefetch" href="/blog-dist/assets/js/256.1626e47d.js"><link rel="prefetch" href="/blog-dist/assets/js/257.929e5d19.js"><link rel="prefetch" href="/blog-dist/assets/js/258.2ccf5010.js"><link rel="prefetch" href="/blog-dist/assets/js/259.4d36ce19.js"><link rel="prefetch" href="/blog-dist/assets/js/26.79e77e63.js"><link rel="prefetch" href="/blog-dist/assets/js/260.4dae1275.js"><link rel="prefetch" href="/blog-dist/assets/js/261.9eac1c55.js"><link rel="prefetch" href="/blog-dist/assets/js/262.6c77c27b.js"><link rel="prefetch" href="/blog-dist/assets/js/263.09436362.js"><link rel="prefetch" href="/blog-dist/assets/js/264.93c72242.js"><link rel="prefetch" href="/blog-dist/assets/js/265.e453ca26.js"><link rel="prefetch" href="/blog-dist/assets/js/266.8676684c.js"><link rel="prefetch" href="/blog-dist/assets/js/267.a9781ebb.js"><link rel="prefetch" href="/blog-dist/assets/js/268.71b86be3.js"><link rel="prefetch" href="/blog-dist/assets/js/269.561149df.js"><link rel="prefetch" href="/blog-dist/assets/js/27.5aeca25b.js"><link rel="prefetch" href="/blog-dist/assets/js/270.9700e9f2.js"><link rel="prefetch" href="/blog-dist/assets/js/271.67d93f1e.js"><link rel="prefetch" href="/blog-dist/assets/js/272.aa14007a.js"><link rel="prefetch" href="/blog-dist/assets/js/273.428198c1.js"><link rel="prefetch" href="/blog-dist/assets/js/274.65e20833.js"><link rel="prefetch" href="/blog-dist/assets/js/275.77f511db.js"><link rel="prefetch" href="/blog-dist/assets/js/276.9393b4a3.js"><link rel="prefetch" href="/blog-dist/assets/js/277.dd12eff0.js"><link rel="prefetch" href="/blog-dist/assets/js/278.2861f731.js"><link rel="prefetch" href="/blog-dist/assets/js/279.fa2ae2e7.js"><link rel="prefetch" href="/blog-dist/assets/js/28.277e2859.js"><link rel="prefetch" href="/blog-dist/assets/js/280.84b051ee.js"><link rel="prefetch" href="/blog-dist/assets/js/281.e351da0d.js"><link rel="prefetch" href="/blog-dist/assets/js/282.d454ae67.js"><link rel="prefetch" href="/blog-dist/assets/js/283.de83a5fe.js"><link rel="prefetch" href="/blog-dist/assets/js/284.6d68419c.js"><link rel="prefetch" href="/blog-dist/assets/js/285.198c5f88.js"><link rel="prefetch" href="/blog-dist/assets/js/286.3bfbebcd.js"><link rel="prefetch" href="/blog-dist/assets/js/287.441e8093.js"><link rel="prefetch" href="/blog-dist/assets/js/288.e27a546f.js"><link rel="prefetch" href="/blog-dist/assets/js/289.21f158a1.js"><link rel="prefetch" href="/blog-dist/assets/js/29.45726272.js"><link rel="prefetch" href="/blog-dist/assets/js/290.c3a854e3.js"><link rel="prefetch" href="/blog-dist/assets/js/30.dc235f53.js"><link rel="prefetch" href="/blog-dist/assets/js/31.e90b89d0.js"><link rel="prefetch" href="/blog-dist/assets/js/32.699ad962.js"><link rel="prefetch" href="/blog-dist/assets/js/33.8872922d.js"><link rel="prefetch" href="/blog-dist/assets/js/34.59855f07.js"><link rel="prefetch" href="/blog-dist/assets/js/35.e8ade735.js"><link rel="prefetch" href="/blog-dist/assets/js/36.b7776823.js"><link rel="prefetch" href="/blog-dist/assets/js/37.056ded05.js"><link rel="prefetch" href="/blog-dist/assets/js/38.0d9ba82d.js"><link rel="prefetch" href="/blog-dist/assets/js/39.807ca9e7.js"><link rel="prefetch" href="/blog-dist/assets/js/4.635c773a.js"><link rel="prefetch" href="/blog-dist/assets/js/40.0f424fd3.js"><link rel="prefetch" href="/blog-dist/assets/js/41.865f0c24.js"><link rel="prefetch" href="/blog-dist/assets/js/42.a7956138.js"><link rel="prefetch" href="/blog-dist/assets/js/43.fe97b020.js"><link rel="prefetch" href="/blog-dist/assets/js/44.db47e39e.js"><link rel="prefetch" href="/blog-dist/assets/js/45.f1ef0b70.js"><link rel="prefetch" href="/blog-dist/assets/js/46.16eeb812.js"><link rel="prefetch" href="/blog-dist/assets/js/47.c90ec212.js"><link rel="prefetch" href="/blog-dist/assets/js/48.5fbc970c.js"><link rel="prefetch" href="/blog-dist/assets/js/49.757aab81.js"><link rel="prefetch" href="/blog-dist/assets/js/5.d60958fd.js"><link rel="prefetch" href="/blog-dist/assets/js/50.d2939df0.js"><link rel="prefetch" href="/blog-dist/assets/js/51.d52b1024.js"><link rel="prefetch" href="/blog-dist/assets/js/52.2cca88c7.js"><link rel="prefetch" href="/blog-dist/assets/js/53.268c1cfc.js"><link rel="prefetch" href="/blog-dist/assets/js/54.1ec2afee.js"><link rel="prefetch" href="/blog-dist/assets/js/55.e024d4d7.js"><link rel="prefetch" href="/blog-dist/assets/js/56.fa75a8e5.js"><link rel="prefetch" href="/blog-dist/assets/js/57.6af177ad.js"><link rel="prefetch" href="/blog-dist/assets/js/58.7fa10196.js"><link rel="prefetch" href="/blog-dist/assets/js/59.768b0b9f.js"><link rel="prefetch" href="/blog-dist/assets/js/6.f92bbb85.js"><link rel="prefetch" href="/blog-dist/assets/js/60.8113485f.js"><link rel="prefetch" href="/blog-dist/assets/js/61.4c6f1d10.js"><link rel="prefetch" href="/blog-dist/assets/js/62.89308ce5.js"><link rel="prefetch" href="/blog-dist/assets/js/63.efd9f017.js"><link rel="prefetch" href="/blog-dist/assets/js/64.972367e6.js"><link rel="prefetch" href="/blog-dist/assets/js/65.8efa4ef8.js"><link rel="prefetch" href="/blog-dist/assets/js/66.7982c5b8.js"><link rel="prefetch" href="/blog-dist/assets/js/67.97c2fa30.js"><link rel="prefetch" href="/blog-dist/assets/js/68.7b7d72da.js"><link rel="prefetch" href="/blog-dist/assets/js/69.d1448281.js"><link rel="prefetch" href="/blog-dist/assets/js/7.af5901bc.js"><link rel="prefetch" href="/blog-dist/assets/js/70.4c2946ab.js"><link rel="prefetch" href="/blog-dist/assets/js/71.c09bb661.js"><link rel="prefetch" href="/blog-dist/assets/js/72.b877b72b.js"><link rel="prefetch" href="/blog-dist/assets/js/73.66c041e3.js"><link rel="prefetch" href="/blog-dist/assets/js/74.ad413220.js"><link rel="prefetch" href="/blog-dist/assets/js/75.9324c9e9.js"><link rel="prefetch" href="/blog-dist/assets/js/76.4a88f5e2.js"><link rel="prefetch" href="/blog-dist/assets/js/77.ccf9be8b.js"><link rel="prefetch" href="/blog-dist/assets/js/78.66cb27b4.js"><link rel="prefetch" href="/blog-dist/assets/js/79.9e151ba2.js"><link rel="prefetch" href="/blog-dist/assets/js/8.8392d3a9.js"><link rel="prefetch" href="/blog-dist/assets/js/80.0e865258.js"><link rel="prefetch" href="/blog-dist/assets/js/81.d2fa8093.js"><link rel="prefetch" href="/blog-dist/assets/js/82.9ccc3277.js"><link rel="prefetch" href="/blog-dist/assets/js/83.4567bbd6.js"><link rel="prefetch" href="/blog-dist/assets/js/84.233be76b.js"><link rel="prefetch" href="/blog-dist/assets/js/85.2d257444.js"><link rel="prefetch" href="/blog-dist/assets/js/86.740f86c5.js"><link rel="prefetch" href="/blog-dist/assets/js/87.10e30ddb.js"><link rel="prefetch" href="/blog-dist/assets/js/88.ffa56810.js"><link rel="prefetch" href="/blog-dist/assets/js/89.2ce73ede.js"><link rel="prefetch" href="/blog-dist/assets/js/9.4d1eff58.js"><link rel="prefetch" href="/blog-dist/assets/js/90.4f2e556c.js"><link rel="prefetch" href="/blog-dist/assets/js/91.ead4fc45.js"><link rel="prefetch" href="/blog-dist/assets/js/92.2bf6c7bd.js"><link rel="prefetch" href="/blog-dist/assets/js/93.d95c5fb2.js"><link rel="prefetch" href="/blog-dist/assets/js/94.f4b2e45b.js"><link rel="prefetch" href="/blog-dist/assets/js/95.d1a26646.js"><link rel="prefetch" href="/blog-dist/assets/js/96.d3a9a691.js"><link rel="prefetch" href="/blog-dist/assets/js/97.b7f77172.js"><link rel="prefetch" href="/blog-dist/assets/js/98.7f464dd2.js"><link rel="prefetch" href="/blog-dist/assets/js/99.b5e30443.js">
    <link rel="stylesheet" href="/blog-dist/assets/css/0.styles.2127079e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-6b17c4e2><div data-v-6b17c4e2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-08f61db9 data-v-6b17c4e2 data-v-6b17c4e2><h3 class="title" data-v-08f61db9>自闭新青年</h3> <p class="description" data-v-08f61db9>学如逆水行舟,不进则退</p> <label id="box" class="inputBox" data-v-08f61db9><input type="password" value="" data-v-08f61db9> <span data-v-08f61db9>Konck! Knock!</span> <button data-v-08f61db9>OK</button></label> <div class="footer" data-v-08f61db9><span data-v-08f61db9><i class="iconfont reco-theme" data-v-08f61db9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-08f61db9>vuePress-theme-reco</a></span> <span data-v-08f61db9><i class="iconfont reco-copyright" data-v-08f61db9></i> <a data-v-08f61db9><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-6b17c4e2><header class="navbar" data-v-6b17c4e2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-dist/" class="home-link router-link-active"><img src="/blog-dist/assets/img/logo.png" alt="自闭新青年" class="logo"> <span class="site-name">自闭新青年</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-dist/" class="nav-link"><i class="iconfont iconfont-shouyetianchong"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont iconfont-bijibenjilutongxunlu"></i>
      学习笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-dist/html/01-html概述.html" class="nav-link"><i class="iconfont iconfont-html"></i>
  html
</a></li><li class="dropdown-subitem"><a href="/blog-dist/css/01-什么是 CSS.html" class="nav-link"><i class="iconfont iconfont-css"></i>
  css
</a></li><li class="dropdown-subitem"><a href="/blog-dist/javaScript/01-js简介.html" class="nav-link"><i class="iconfont iconfont-JavaScript"></i>
  javaScript
</a></li><li class="dropdown-subitem"><a href="/blog-dist/ES6+ 特性/01-ES6 简介.html" class="nav-link"><i class="iconfont iconfont-ES"></i>
  ES6+ 特性
</a></li><li class="dropdown-subitem"><a href="/blog-dist/jquery/01-jQuery简介.html" class="nav-link"><i class="iconfont iconfont-jQuery"></i>
  jquery
</a></li><li class="dropdown-subitem"><a href="/blog-dist/TypeScript/01-语言的分类.html" class="nav-link"><i class="iconfont iconfont-Typescript"></i>
  typeScript
</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-dist/vue/vue2/01-vue2简介.html" class="nav-link"><i class="iconfont iconfont-Vue2"></i>
  vue2
</a></li><li class="dropdown-subitem"><a href="/blog-dist/vue/vue3/01-vue3简介.html" class="nav-link"><i class="iconfont iconfont-vue3"></i>
  vue3
</a></li><li class="dropdown-subitem"><a href="/blog-dist/react/01-react简介.html" class="nav-link"><i class="iconfont iconfont-React"></i>
  react
</a></li></ul></li><li class="dropdown-item"><h4>打包工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-dist/webpack/01-简介.html" class="nav-link"><i class="iconfont iconfont-webpack"></i>
  webpack
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog-dist/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog-dist/tools.html" class="nav-link"><i class="iconfont iconfont-gongju"></i>
  工具
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-6b17c4e2></div> <aside class="sidebar" data-v-6b17c4e2><div class="personal-info-wrapper" data-v-3d87d2e4 data-v-6b17c4e2><img src="/blog-dist/assets/img/head-portrait.jpg" alt="author-avatar" class="personal-img" data-v-3d87d2e4> <!----> <div class="num" data-v-3d87d2e4><div data-v-3d87d2e4><h3 data-v-3d87d2e4>17</h3> <h6 data-v-3d87d2e4>Articles</h6></div> <div data-v-3d87d2e4><h3 data-v-3d87d2e4>0</h3> <h6 data-v-3d87d2e4>Tags</h6></div></div> <ul class="social-links" data-v-3d87d2e4><li class="social-item" data-v-3d87d2e4><i class="iconfont reco-github" style="color:#e15b64;" data-v-3d87d2e4></i></li><li class="social-item" data-v-3d87d2e4><i class="iconfont reco-npm" style="color:#e15b64;" data-v-3d87d2e4></i></li></ul> <hr data-v-3d87d2e4></div> <nav class="nav-links"><div class="nav-item"><a href="/blog-dist/" class="nav-link"><i class="iconfont iconfont-shouyetianchong"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont iconfont-bijibenjilutongxunlu"></i>
      学习笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-dist/html/01-html概述.html" class="nav-link"><i class="iconfont iconfont-html"></i>
  html
</a></li><li class="dropdown-subitem"><a href="/blog-dist/css/01-什么是 CSS.html" class="nav-link"><i class="iconfont iconfont-css"></i>
  css
</a></li><li class="dropdown-subitem"><a href="/blog-dist/javaScript/01-js简介.html" class="nav-link"><i class="iconfont iconfont-JavaScript"></i>
  javaScript
</a></li><li class="dropdown-subitem"><a href="/blog-dist/ES6+ 特性/01-ES6 简介.html" class="nav-link"><i class="iconfont iconfont-ES"></i>
  ES6+ 特性
</a></li><li class="dropdown-subitem"><a href="/blog-dist/jquery/01-jQuery简介.html" class="nav-link"><i class="iconfont iconfont-jQuery"></i>
  jquery
</a></li><li class="dropdown-subitem"><a href="/blog-dist/TypeScript/01-语言的分类.html" class="nav-link"><i class="iconfont iconfont-Typescript"></i>
  typeScript
</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-dist/vue/vue2/01-vue2简介.html" class="nav-link"><i class="iconfont iconfont-Vue2"></i>
  vue2
</a></li><li class="dropdown-subitem"><a href="/blog-dist/vue/vue3/01-vue3简介.html" class="nav-link"><i class="iconfont iconfont-vue3"></i>
  vue3
</a></li><li class="dropdown-subitem"><a href="/blog-dist/react/01-react简介.html" class="nav-link"><i class="iconfont iconfont-React"></i>
  react
</a></li></ul></li><li class="dropdown-item"><h4>打包工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-dist/webpack/01-简介.html" class="nav-link"><i class="iconfont iconfont-webpack"></i>
  webpack
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog-dist/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/blog-dist/tools.html" class="nav-link"><i class="iconfont iconfont-gongju"></i>
  工具
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-dist/node/09.Node.html" aria-current="page" class="active sidebar-link">Node.js 简介</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-08f61db9 data-v-6b17c4e2><h3 class="title" data-v-08f61db9></h3> <!----> <label id="box" class="inputBox" data-v-08f61db9><input type="password" value="" data-v-08f61db9> <span data-v-08f61db9>Konck! Knock!</span> <button data-v-08f61db9>OK</button></label> <div class="footer" data-v-08f61db9><span data-v-08f61db9><i class="iconfont reco-theme" data-v-08f61db9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-08f61db9>vuePress-theme-reco</a></span> <span data-v-08f61db9><i class="iconfont reco-copyright" data-v-08f61db9></i> <a data-v-08f61db9><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-6b17c4e2><div data-v-6b17c4e2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Node.js 简介</h1> <div data-v-162cc157><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="node-js-简介"><a href="#node-js-简介" class="header-anchor">#</a> Node.js 简介</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nodejs<span class="token punctuation">.</span>cn<span class="token operator">/</span>learn
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Node<span class="token punctuation">.</span>js 是一个基于 Chrome <span class="token constant">V8</span> 引擎的 JavaScript 运行环境。

<span class="token number">1.</span>浏览器是 JavaScript 的前端运行环境
<span class="token number">2</span><span class="token punctuation">.</span>Node<span class="token punctuation">.</span>js 是 JavaScript 的后端运行环境
<span class="token number">3</span><span class="token punctuation">.</span>Node<span class="token punctuation">.</span>js 中无法调用 <span class="token constant">DOM</span> 和 <span class="token constant">BOM</span> 等浏览器内置<span class="token constant">API</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Node<span class="token punctuation">.</span>js 特点	<span class="token operator">--</span> 单线程、事件驱动、非阻塞<span class="token constant">I</span><span class="token operator">/</span><span class="token constant">O</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token constant">I</span><span class="token operator">/</span><span class="token constant">O</span> <span class="token punctuation">(</span>inpur<span class="token punctuation">,</span>output<span class="token punctuation">)</span><span class="token punctuation">,</span>对磁盘的读写操作

非阻塞<span class="token constant">I</span><span class="token operator">/</span><span class="token constant">O</span>：是指用异步来执行函数，先执行同步任务，耗时任务放在事件队列中，以此轮序执行

<span class="token literal-property property">同步</span><span class="token operator">:</span>就是调用某个东西，调用得等待这个调用返回结果才能继续往后执行

<span class="token literal-property property">异步</span><span class="token operator">:</span>和同步相反，调用不会立即得到结果，而足在调用发出后调用者可以继续执行后续操作，被调用者通过状态来通知调用者，或者通过回调函数来处理这个调用

<span class="token literal-property property">NodeJS</span><span class="token operator">:</span>是单进程单线程，但是通过事件或者回调函数支持高并发，所以性能更高，每一个<span class="token constant">API</span>都是异步并作为一个独立的线程运行，使用异步函数调用

异步不会阻塞程序运行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token constant">NVM</span>实现多版本共存和无缝切换 node<span class="token punctuation">.</span>js
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV12h411z7Kq<span class="token operator">?</span>from<span class="token operator">=</span>search<span class="token operator">&amp;</span>seid<span class="token operator">=</span><span class="token number">9451054475399355863</span>
博客地址 https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>mintimate<span class="token punctuation">.</span>cn<span class="token operator">/</span><span class="token number">2021</span><span class="token operator">/</span><span class="token number">07</span><span class="token operator">/</span><span class="token number">26</span><span class="token operator">/</span>nvmNode<span class="token operator">/</span> 
是 <span class="token string">'settings.txt'</span> 文件，博客这里有误

版本参考 https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nodejs<span class="token punctuation">.</span>org<span class="token operator">/</span>zh<span class="token operator">-</span>cn<span class="token operator">/</span>download<span class="token operator">/</span>releases<span class="token operator">/</span>
版本号逢单  测试版本  逢双都是稳定版本

配置完 nvm
安装指定版本   nvm install xx<span class="token punctuation">.</span>xx<span class="token punctuation">.</span>xx
设置 node 全局安装的 储存位置
npm config <span class="token keyword">set</span> prefix <span class="token string">&quot;D:\node\node_global&quot;</span>
npm config <span class="token keyword">set</span> cache <span class="token string">&quot;D:\node\node_cache&quot;</span>
配置 <span class="token function">系统的环境变量</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token string">&quot;D:\node\node_global&quot;</span>

查看已安装版本 nvm list
查看可安装版本 nvm list available
激活指定版本（激活需要管理员命令窗口）	 nvm use xx<span class="token punctuation">.</span>xx<span class="token punctuation">.</span>xx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span> 基于 Express 框架（<span class="token string">'http://www.expressjs.com.cn/'</span>），可以快速构建 Web 应用
<span class="token number">2.</span>基于 Electron 框架（<span class="token string">'https://electronjs.org/'</span>），可以构建跨平台的桌面应用
<span class="token number">3.</span>基于 restify 框架（<span class="token string">'http://restify.com/'</span>），可以快速构建 <span class="token constant">API</span> 接口项目
<span class="token number">4.</span>读写和操作数据库、创建实用的命令行工具辅助前端开发、etc…
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="退出"><a href="#退出" class="header-anchor">#</a> 退出</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Node 中执行 JavaScript 
cmd <span class="token operator">==</span><span class="token operator">&gt;</span> node <span class="token punctuation">.</span>js文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>如何退出 Node<span class="token punctuation">.</span>js 程序

当在控制台中运行程序时，可以用 ctrl<span class="token operator">-</span><span class="token constant">C</span> 关闭它

编程方式退出 <span class="token operator">==</span><span class="token operator">&gt;</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
可以传入一个整数，向操作系统发出退出代码的信号
process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
默认的退出码为 <span class="token number">0</span>，表示成功。 不同的退出代码有不同的含义 也可以设置 process<span class="token punctuation">.</span>exitCode
process<span class="token punctuation">.</span>exitCode <span class="token operator">=</span> <span class="token number">1</span>
当程序结束时，Node<span class="token punctuation">.</span>js 将返回该退出代码。

更多关于退出代码的信息
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nodejs<span class="token punctuation">.</span>cn<span class="token operator">/</span>api<span class="token operator">/</span>process<span class="token punctuation">.</span>html#process_exit_codes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="fs-文件属性模块"><a href="#fs-文件属性模块" class="header-anchor">#</a> fs 文件属性模块</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs 模块是 Node<span class="token punctuation">.</span>js 官方提供的、用来操作文件的模块。它提供了一系列的方法和属性，用来满足用户对文件的操作需求
<span class="token comment">//引入系统模块fs</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token string">&quot;node里所有的回调函数中第一个参数都是错误回调&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="fs-stat"><a href="#fs-stat" class="header-anchor">#</a> fs.stat()</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 检测文件是文件还是目录

fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">'文件路径'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>

stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 返回true和false  true表示文件</span>
stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 返回true和false  true表示目录</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">'./index.js'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//检测不到文件</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">文件：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true 文件</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">目录：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>stats<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="fs-mkdir"><a href="#fs-mkdir" class="header-anchor">#</a> fs.mkdir()</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 创建目录

fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'目录路径'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'23/22'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建目录失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;创建目录成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="fs-readfile"><a href="#fs-readfile" class="header-anchor">#</a> fs.readFile()</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，用来读取指定文件中的内容
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>options<span class="token punctuation">,</span>callbac<span class="token punctuation">)</span>

path：必选参数，字符串，表示文件的路径。
options：可选参数，表示以什么编码格式来读取文件。
callbac：必选参数，文件读取完后的回调函数

<span class="token comment">//第一种</span>
<span class="token comment">//1.读取的文件是二进制数据流，可以在读取的时候设置编码格式utf-8</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//第二种</span>
<span class="token comment">//2.读取的文件是二进制数据流，可以通过toString()转换成字符串</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

如果读取成功，则 err 的值为 <span class="token keyword">null</span>
如果读取失败，则 err 的值为 错误对象，dataStr 的值为 <span class="token keyword">undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="fs-writefile"><a href="#fs-writefile" class="header-anchor">#</a> fs.writeFile()</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，用来向指定的文件中写入内容
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>data<span class="token punctuation">,</span>options<span class="token punctuation">,</span>callback<span class="token punctuation">)</span>

path：必选参数，字符串，表示文件的路径。
<span class="token literal-property property">data</span><span class="token operator">:</span> 必选参数，表示要写入的内容。
options：可选参数，表示以什么编码格式写入文件。
callbac：必选参数，文件写入后的回调函数

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span><span class="token string">'456789'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

如果文件写入成功，则 err 的值等于 <span class="token keyword">null</span>
如果文件写入失败，则 err 的值等于一个 错误对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法只能用来创建文件，不能用来创建路径
重复调用 fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 写入同一个文件，新写入的内容会覆盖之前的旧内容
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="fs-模块-路径动态拼接的问题"><a href="#fs-模块-路径动态拼接的问题" class="header-anchor">#</a> fs 模块 - 路径动态拼接的问题</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>在使用 fs 模块操作文件时，如果提供的操作路径是以 <span class="token punctuation">.</span><span class="token operator">/</span> 或 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span> 开头的相对路径时，很容易出现路径动态拼接错误的问题。
原因：代码在运行的时候，会以执行 node 命令时所处的目录，动态拼接出被操作文件的完整路径。
解决方案：在使用 fs 模块操作文件时，直接提供完整的路径，不要提供 <span class="token punctuation">.</span><span class="token operator">/</span> 或 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span> 开头的相对路径，从而防止路径动态拼接的问题

<span class="token string">'E:\WEB_file\node'</span> 这种方式移值性差 不利于维护
变量 <span class="token string">'__dirname'</span> 表示当前文件所处的目录
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="fs-appendfile"><a href="#fs-appendfile" class="header-anchor">#</a> fs.appendFile()</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 创建文件并写入内容 <span class="token operator">||</span> 追加内容

fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'文件路径'</span><span class="token punctuation">,</span><span class="token string">'追加的内容'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./index.txt'</span><span class="token punctuation">,</span> <span class="token string">'内容'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="readdir"><a href="#readdir" class="header-anchor">#</a> readdir()</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 读取目录列表  <span class="token comment">// 把当前目录的中的文件名放置在一个数组中</span>

fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'文件路径'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'./index'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> file</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="fs-rename"><a href="#fs-rename" class="header-anchor">#</a> fs.rename</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span>rename 重命名（重命名目录或者文件名称都可以）

fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'旧文件名称'</span><span class="token punctuation">,</span><span class="token string">'新文件名称'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="fs-rmdir"><a href="#fs-rmdir" class="header-anchor">#</a> fs.rmdir()</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 删除目录（只能删除空目录，文件夹里面有文件无法删除）

fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'目录路径'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="fs-unlink"><a href="#fs-unlink" class="header-anchor">#</a> fs.unlink()</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 删除文件

fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'文件路径'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="fs-copyfile"><a href="#fs-copyfile" class="header-anchor">#</a> fs.copyFile()</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>fs<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 拷贝文件

fs<span class="token punctuation">.</span><span class="token function">copyFile</span><span class="token punctuation">(</span><span class="token string">'文件路径'</span><span class="token punctuation">,</span><span class="token string">'拷贝的文件路径'</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="同步异步"><a href="#同步异步" class="header-anchor">#</a> 同步异步</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>以上的方法否是异步操作，如果想同步操作，方法后面<span class="token operator">+</span>Sync<span class="token punctuation">,</span>但参数中没有回调函数

fs<span class="token punctuation">.</span><span class="token function">unlinkSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 删除文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="path-文件路径模块"><a href="#path-文件路径模块" class="header-anchor">#</a> path 文件路径模块</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>path 模块是 Node<span class="token punctuation">.</span>js 官方提供的、用来处理路径的模块。它提供了一系列的方法和属性，用来满足用户对路径的处理
需求

path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，用来将多个路径片段拼接成一个完整的路径字符串
path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，用来从路径字符串中，将文件名解析出来
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="path-join"><a href="#path-join" class="header-anchor">#</a> path.join()</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>使用 path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，可以把多个路径片段拼接为完整的路径字符串

path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>paths<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">...</span>paths <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 路径片段的序列
返回值: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span> 会抵消前面的路径
<span class="token keyword">const</span> pathStr <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token string">'/b/c'</span><span class="token punctuation">,</span> <span class="token string">'../../'</span><span class="token punctuation">,</span> <span class="token string">'./d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pathStr<span class="token punctuation">)</span>  <span class="token comment">// \a\b\d\e</span>

配合 __dirname 使用
path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./files/1.txt'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="path-basename"><a href="#path-basename" class="header-anchor">#</a> path.basename()</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>使用 path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，可以获取路径中的最后一部分，经常通过这个方法获取路径中的文件名

path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>ext<span class="token punctuation">)</span>
path <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 必选参数，表示一个路径的字符串
ext </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 可选参数，表示文件扩展
返回: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 表示路径中的最后一部分
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="path-extname"><a href="#path-extname" class="header-anchor">#</a> path.extname()</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>使用 path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，可以获取路径中的扩展名部分

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
path <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">必选参数，表示一个路径的字符串
返回: </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 返回得到的扩展名字符串
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="http-模块"><a href="#http-模块" class="header-anchor">#</a> http 模块</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>http 模块是 Node<span class="token punctuation">.</span>js 官方提供的、用来创建 web 服务器的模块。通过 http 模块提供的 http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，就
能方便的把一台普通的电脑，变成一台 Web 服务器，从而对外提供 Web 资源服务。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>服务器和普通电脑的区别在于，服务器上安装了 web 服务器软件，例如：<span class="token constant">IIS</span>、Apache 等。通过安装这些服务器软件<span class="token punctuation">,</span>就能把一台普通的电脑变成一台 web 服务器

在 Node<span class="token punctuation">.</span>js 中，我们不需要使用 <span class="token constant">IIS</span>、Apache 等这些第三方 web 服务器软件。因为我们可以基于 Node<span class="token punctuation">.</span>js 提供的 http 模块，通过几行简单的代码，就能轻松的手写一个服务器软件，从而对外提供 web 服务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>如果要希望使用 http 模块创建 Web 服务器，则需要先导入它
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="创建基本的-web-服务器"><a href="#创建基本的-web-服务器" class="header-anchor">#</a> 创建基本的 web 服务器</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span>导入 http 模块
<span class="token number">2.</span>创建 web 服务器实例
<span class="token number">3.</span>为服务器实例绑定 request 事件，监听客户端的请求
<span class="token number">4.</span>启动服务
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 1.引入http模块</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2.创建Web服务器</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3.为服务器实例绑定 request 事件，监听客户端的请求</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// req 前端-&gt; 后端 发送的请求信息</span>
  <span class="token comment">// res 后端-&gt; 前端 响应的请求信息</span>
  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'content-type'</span><span class="token operator">:</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Hello，你好！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 4.启动服务器</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务器已启动，请访问http://localhost:3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//简化写法 ==&gt; 创建服务器并绑定 request 事件，监听客户端的请求</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'content-type'</span><span class="token operator">:</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Hello，你好！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="req-请求对象"><a href="#req-请求对象" class="header-anchor">#</a> req 请求对象</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>只要服务器接收到了客户端的请求，就会调用通过 server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 为服务器绑定的 request 事件处理函数
<span class="token literal-property property">如果想在事件处理函数中，访问与客户端相关的数据或属性，可以使用如下的方式</span><span class="token operator">:</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">//req 是请求对象，包含了客户端相关的数据和属性</span>
  <span class="token comment">//req.url</span>
  <span class="token comment">//req.methods</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="res-响应对象"><a href="#res-响应对象" class="header-anchor">#</a> res 响应对象</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>在服务器的 request 事件处理函数中，如果想访问与服务器相关的数据或属性，可以使用如下的方式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">//res 是响应对象，包含了服务端相关的数据和属性</span>
  <span class="token comment">//res.url</span>
  <span class="token comment">//res.methods</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 向客户端发送指定内容，并结束这次请求
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="解决中文乱码问题"><a href="#解决中文乱码问题" class="header-anchor">#</a> 解决中文乱码问题</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>当调用 res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，向客户端发送中文内容的时候，会出现乱码问题，此时，需要手动设置内容的编码格式

<span class="token number">2</span>种方式
res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string-property property">'content-type'</span><span class="token operator">:</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'Hello，你好！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务器已启动，请访问http://localhost:3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="根据不同的-url-响应不同的-html-内容"><a href="#根据不同的-url-响应不同的-html-内容" class="header-anchor">#</a> 根据不同的 url 响应不同的 html 内容</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span>获取请求的 url 地址
<span class="token number">2.</span>设置默认的响应内容为 <span class="token number">404</span> Not found
<span class="token number">3.</span>判断用户请求的是否为 <span class="token operator">/</span> 或 <span class="token operator">/</span>index<span class="token punctuation">.</span>html 首页
<span class="token number">4.</span>判断用户请求的是否为 <span class="token operator">/</span>about<span class="token punctuation">.</span>html 关于页面
<span class="token number">5.</span>设置 Content<span class="token operator">-</span>Type 响应头，防止中文乱码
<span class="token number">6.</span>使用 res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 把内容响应给客户端
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> req<span class="token punctuation">.</span>url
  <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">'404'</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>url <span class="token operator">==</span> <span class="token string">'/'</span> <span class="token operator">||</span> url <span class="token operator">===</span> <span class="token string">'/index.html'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    content <span class="token operator">=</span>  <span class="token string">'&lt;h1&gt;首页&lt;/h1&gt;'</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>url <span class="token operator">==</span> <span class="token string">'/about.html'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    content <span class="token operator">=</span>  <span class="token string">'&lt;h1&gt;关于&lt;/h1&gt;'</span>
  <span class="token punctuation">}</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务器已启动，请访问http://localhost:3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="url-请求路径模块"><a href="#url-请求路径模块" class="header-anchor">#</a> url  请求路径模块</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code></code></pre> <div class="line-numbers-wrapper"></div></div><h2 id="events模块"><a href="#events模块" class="header-anchor">#</a> Events模块</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>NodeJs有多个内置的事件，可以通过引入Events模块，并通过实例化 EventEmitter 类来绑定和监听事件，是异步的事件驱动
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 引入Events模块</span>
<span class="token keyword">const</span> events <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>events<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> EventEmitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">events<span class="token punctuation">.</span>EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>EventEmitter<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 接收广播</span>
EventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'class_over'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'接收广播'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送广播</span>
EventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'class_over'</span><span class="token punctuation">,</span><span class="token string">'给student发送的消息'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 接收广播</span>
EventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'class_over'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'接收广播'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送广播</span>
EventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'class_over'</span><span class="token punctuation">,</span><span class="token string">'给student发送的消息'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="nodejs路由"><a href="#nodejs路由" class="header-anchor">#</a> NodeJS路由</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token literal-property property">NodeJS路由</span><span class="token operator">:</span>是由一<span class="token constant">I</span>个<span class="token constant">URI</span> <span class="token punctuation">(</span>路径<span class="token punctuation">)</span>和一个特定的<span class="token constant">HTTP</span><span class="token function">方法</span><span class="token punctuation">(</span><span class="token constant">GET</span> <span class="token punctuation">.</span> <span class="token constant">POST</span>等<span class="token punctuation">)</span>组成的，涉及到应用如何响应
<span class="token literal-property property">客户端对某个NodeJS路由</span><span class="token operator">:</span>是由一<span class="token constant">I</span>个<span class="token constant">URI</span> <span class="token punctuation">(</span>路径<span class="token punctuation">)</span>和一个特定的<span class="token constant">HTTP</span><span class="token function">方法</span><span class="token punctuation">(</span><span class="token constant">GET</span> <span class="token punctuation">.</span> <span class="token constant">POST</span>等<span class="token punctuation">)</span>组成的，涉及到应用如何响应客户端对某个网站的访问
<span class="token literal-property property">路由白话</span><span class="token operator">:</span>路由是针对不同请求的url<span class="token punctuation">,</span>处理不同的业务逻辑

<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nodejs<span class="token punctuation">.</span>cn<span class="token operator">/</span>learn<span class="token operator">/</span>making<span class="token operator">-</span>http<span class="token operator">-</span>requests<span class="token operator">-</span><span class="token keyword">with</span><span class="token operator">-</span>nodejs
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nodejs<span class="token punctuation">.</span>cn<span class="token operator">/</span>learn<span class="token operator">/</span>make<span class="token operator">-</span>an<span class="token operator">-</span>http<span class="token operator">-</span>post<span class="token operator">-</span>request<span class="token operator">-</span>using<span class="token operator">-</span>nodejs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>nodeRouter<span class="token punctuation">.</span>js

<span class="token comment">// NodeJS 路由  封装</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>method <span class="token operator">=</span> <span class="token string">'post'</span>
  <span class="token comment">//引入url模块</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//获取请求的路径名</span>
  <span class="token keyword">let</span> pathname <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'content-type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">==</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> objStr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>objStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">==</span> <span class="token string">&quot;/favicon.ico&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">==</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;你访问的是首页&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">==</span> <span class="token string">&quot;/news&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;你访问的是新闻页&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pathname <span class="token operator">==</span> <span class="token string">&quot;/about&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&quot;你访问的是关于页&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>nodeServe<span class="token punctuation">.</span>js

<span class="token comment">// 1.引入http模块</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2.创建Web服务器</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 引入创建的路由</span>
<span class="token keyword">const</span> nodeRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./nodeRouter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3.为服务器实例绑定 request 事件，监听客户端的请求</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">//调用路由方法</span>
  <span class="token function">nodeRouter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 4.启动服务器</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务器已启动，请访问 http://127.0.1.1:3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="模块化"><a href="#模块化" class="header-anchor">#</a> 模块化</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>模块化是指解决一个复杂问题时，自顶向下逐层把系统划分成若干模块的过程。对于整个系统来说，模块是可组合、分解和更换的单元

编程领域中的模块化，就是遵守固定的规则，把一个大文件拆成独立并互相依赖的多个小模块。

把代码进行模块化拆分的好处：
<span class="token number">1.</span>提高了代码的复用性
<span class="token number">2.</span>提高了代码的可维护性
<span class="token number">3.</span>可以实现按需加载
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Node<span class="token punctuation">.</span>js 中根据模块来源的不同，将模块分为了 <span class="token number">3</span> 大类，分别是

内置模块（内置模块是由 Node<span class="token punctuation">.</span>js 官方提供的，例如 http path fs url<span class="token operator">...</span>）
自定义模块（用户创建的每个 <span class="token punctuation">.</span>js 文件，都是自定义模块）
第三方模块（由第三方开发出来的模块，jquery Bootstrap vue react  swiper<span class="token operator">...</span>）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="加载模块"><a href="#加载模块" class="header-anchor">#</a> 加载模块</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>使用强大的 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，可以加载需要的内置模块、用户自定义模块、第三方模块进行使用
<span class="token string">'使用 require() 方法加载其它模块时，会执行被加载模块中的代码'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 加载内置模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 加载自定义模块</span>
<span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 加载第三方模块</span>
<span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'moment'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="模块作用域"><a href="#模块作用域" class="header-anchor">#</a> 模块作用域</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>模块作用域和函数作用域类似，在自定义模块中定义的变量、方法等成员，默认只能在当前模块内被访问，这种模块级别的访问限制，叫做模块作用域
模块作用域 <span class="token operator">==</span><span class="token operator">&gt;</span> 防止了全局变量污染的问题
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//index.js</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'张三'</span>
<span class="token keyword">const</span> <span class="token function-variable function">hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是张三'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//home.js</span>
<span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="向外共享模块作用域中的成员"><a href="#向外共享模块作用域中的成员" class="header-anchor">#</a> 向外共享模块作用域中的成员</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>module <span class="token operator">==</span><span class="token operator">&gt;</span> 在每个自定义模块中都有一个 module 对象，它里面存储了和当前模块有关的信息
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>module<span class="token punctuation">.</span>exports

module<span class="token punctuation">.</span>exports 默认是空对象 <span class="token punctuation">{</span><span class="token punctuation">}</span>

在自定义模块中，可以使用 module<span class="token punctuation">.</span>exports 对象，将模块内的成员共享出去，供外界使用。
外界用 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法导入自定义模块时，得到的就是 module<span class="token punctuation">.</span>exports 所指向的对象
<span class="token string">'使用 require() 方法导入模块时，导入的结果，永远以 module.exports 指向的对象为准'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>exports

由于 module<span class="token punctuation">.</span>exports 单词写起来比较复杂，为了简化向外共享成员的代码，Node 提供了 exports 对象。
默认情况下，exports 和 module<span class="token punctuation">.</span>exports 指向同一个对象。最终共享的结果，还是以 module<span class="token punctuation">.</span>exports 指向的对象为准
<span class="token string">'不能直接将 exports 变量指向一个值，因为这样等于切断了exports 与 module.exports 的联系，只能通过打点的方式暴露模块'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//index.js</span>

exports<span class="token punctuation">.</span>obj <span class="token operator">=</span>  <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">'张三'</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">'张三'</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//home.js</span>

<span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{ obj: { name: '张三' } }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="node-js-中的模块化规范"><a href="#node-js-中的模块化规范" class="header-anchor">#</a> Node.js 中的模块化规范</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Node<span class="token punctuation">.</span>js 遵循了 CommonJS 模块化规范，CommonJS 规定了模块的特性和各模块之间如何相互依赖。

CommonJS 规定：
<span class="token number">1.</span>每个模块内部，module 变量代表当前模块。
<span class="token number">2</span><span class="token punctuation">.</span>module 变量是一个对象，它的 exports 属性（即 module<span class="token punctuation">.</span>exports）是对外的接口。
<span class="token number">3.</span>加载某个模块，其实是加载该模块的 module<span class="token punctuation">.</span>exports <span class="token function">属性。require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法用于加载模块。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="模块的加载机制"><a href="#模块的加载机制" class="header-anchor">#</a> 模块的加载机制</h3> <h4 id="优先从缓存中加载"><a href="#优先从缓存中加载" class="header-anchor">#</a> 优先从缓存中加载</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token string">'模块在第一次加载后会被缓存'</span>。 这也意味着多次调用 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 不会导致模块的代码被执行多次。
注意：不论是内置模块、用户自定义模块、还是第三方模块，它们都会优先从缓存中加载，从而提高模块的加载效率
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="内置模块的加载机制"><a href="#内置模块的加载机制" class="header-anchor">#</a> 内置模块的加载机制</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>内置模块是由 Node<span class="token punctuation">.</span>js 官方提供的模块，<span class="token string">'内置模块的加载优先级最高'</span>。
<span class="token function">例如，require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span> 始终返回内置的 fs 模块，即使在 node_modules 目录下有名字相同的包也叫做 fs。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="自定义模块的加载机制"><a href="#自定义模块的加载机制" class="header-anchor">#</a> 自定义模块的加载机制</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>使用 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 加载自定义模块时，必须指定以 <span class="token punctuation">.</span><span class="token operator">/</span> 或 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span> 开头的路径标识符。
在加载自定义模块时，如果没有指定 <span class="token punctuation">.</span><span class="token operator">/</span> 或 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span> 这样的路径标识符，则 node 会把它当作内置模块或第三方模块进行加载。

同时，在使用 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 导入自定义模块时，如果省略了文件的扩展名，则 Node<span class="token punctuation">.</span>js 会按顺序分别尝试加载以下的文件：
<span class="token number">1.</span>按照确切的文件名进行加载
<span class="token number">2.</span>补全 <span class="token punctuation">.</span>js 扩展名进行加载
<span class="token number">3.</span>补全 <span class="token punctuation">.</span>json 扩展名进行加载
<span class="token number">4.</span>补全 <span class="token punctuation">.</span>node 扩展名进行加载
<span class="token number">5.</span>加载失败，终端报错
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="第三方模块的加载机制"><a href="#第三方模块的加载机制" class="header-anchor">#</a> 第三方模块的加载机制</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>如果传递给 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 的模块标识符不是一个内置模块，也没有以 <span class="token punctuation">.</span><span class="token operator">/</span> 或 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span> 开头，则 Node<span class="token punctuation">.</span>js 会从当前模块的父目录开始，尝试从 <span class="token operator">/</span>node_modules 文件夹中加载第三方模块。
如果没有找到对应的第三方模块，则移动到再上一层父目录中，进行加载，直到文件系统的根目录。

例如，假设在 <span class="token string">'C:\Users\itheima\project\foo.js'</span> 文件里调用了 <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tools'</span><span class="token punctuation">)</span>，则 Node<span class="token punctuation">.</span>js 会按以下顺序查找：
<span class="token number">1.</span> <span class="token constant">C</span><span class="token operator">:</span>\Users\itheima\project\node_modules\tools
<span class="token number">2.</span> <span class="token constant">C</span><span class="token operator">:</span>\Users\itheima\node_modules\tools
<span class="token number">3.</span> <span class="token constant">C</span><span class="token operator">:</span>\Users\node_modules\tools
<span class="token number">4.</span> <span class="token constant">C</span><span class="token operator">:</span>\node_modules\tools
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="目录作为模块"><a href="#目录作为模块" class="header-anchor">#</a> 目录作为模块</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>当把目录作为模块标识符，传递给 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 进行加载的时候，有三种加载方式：

<span class="token number">1.</span>在被加载的目录下查找一个叫做 <span class="token keyword">package</span><span class="token punctuation">.</span>json 的文件，并寻找 main 属性，作为 <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 加载的入口
<span class="token number">2.</span>如果目录里没有 <span class="token keyword">package</span><span class="token punctuation">.</span>json 文件，或者 main 入口不存在或无法解析，则 Node<span class="token punctuation">.</span>js 将会试图加载目录下的 index<span class="token punctuation">.</span>js 文件。
<span class="token number">3.</span>如果以上两步都失败了，则 Node<span class="token punctuation">.</span>js 会在终端打印错误消息，报告模块的缺失：
<span class="token literal-property property">Error</span><span class="token operator">:</span> Cannot find module <span class="token string">'xxx'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="npm包管理"><a href="#npm包管理" class="header-anchor">#</a> NPM包管理</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Node<span class="token punctuation">.</span>js 中的第三方模块又叫做包
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>包的来源

不同于 Node<span class="token punctuation">.</span>js 中的内置模块与自定义模块，包是由第三方个人或团队开发出来的，免费供所有人使用。
注意：Node<span class="token punctuation">.</span>js 中的包都是免费且开源的，不需要付费即可免费下载使用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>为什么需要包

由于 Node<span class="token punctuation">.</span>js 的内置模块仅提供了一些底层的 <span class="token constant">API</span>，导致在基于内置模块进行项目开发的时，效率很低。
包是基于内置模块封装出来的，提供了更高级、更方便的 <span class="token constant">API</span>，极大的提高了开发效率。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>从哪里下载包

国外有一家 <span class="token constant">IT</span> 公司，叫做 npm<span class="token punctuation">,</span> Inc<span class="token punctuation">.</span> 这家公司旗下有一个非常著名的网站： <span class="token string">'https://www.npmjs.com/'</span> ，它是全球最大的包共享平台，你可以从这个网站上搜索到任何你需要的包。
公司提供了一个地址为 <span class="token string">'https://registry.npmjs.org/'</span> 的服务器，来对外共享所有的包，我们可以从这个服务
器上下载自己所需要的包。

从 <span class="token string">'https://www.npmjs.com/'</span> 网站上搜索自己所需要的包
从 <span class="token string">'https://registry.npmjs.org/'</span> 服务器上下载自己需要的包
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="命令"><a href="#命令" class="header-anchor">#</a> 命令</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span><span class="token function">安装模块</span><span class="token punctuation">(</span> 把安装的模块写入<span class="token keyword">package</span><span class="token punctuation">.</span>json<span class="token punctuation">)</span>

npm i module_name  <span class="token operator">-</span><span class="token constant">S</span>  <span class="token operator">=</span> <span class="token operator">&gt;</span>  npm install module_name <span class="token operator">--</span>save    写入到 <span class="token string">'dependencies'</span> 对象
npm i module_name  <span class="token operator">-</span><span class="token parameter"><span class="token constant">D</span></span>  <span class="token operator">=&gt;</span> npm install module_name <span class="token operator">--</span>save<span class="token operator">-</span>dev   写入到 <span class="token string">'devDependencies'</span> 对象


<span class="token operator">--</span>save 和 <span class="token operator">--</span>save<span class="token operator">-</span>dev 的区别

<span class="token operator">--</span>save<span class="token operator">:</span>
将保存配置信息到 <span class="token keyword">package</span><span class="token punctuation">.</span>json 中 dependencies 节点中，可通过 npm install 重新安装。
运行时需要的依赖，发布后，即生产环境下还需要用的模块。

<span class="token operator">--</span>save<span class="token operator">-</span>dev：将保存配置信息到 <span class="token keyword">package</span><span class="token punctuation">.</span>json 中 devDependencies 节点中，可通过 npm install 重新安装。
<span class="token function">开发时需要的依赖</span><span class="token punctuation">(</span>里面的模块是开发时用的<span class="token punctuation">)</span>，发布时不用它（上线的时候不需要这个模块）

<span class="token string">'dependencies'</span> 与 <span class="token string">'devDependencies'</span> 的区别是，后者是开发时依赖的模块包，生产环境不需要。
比如 安装的 babel（将 es6 转换成 es5 的工具），打包之后的代码就是 es5 代码，所以不需要此依赖模块。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">2.</span>卸载模块	<span class="token operator">--</span> npm uninstall moduleName  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">3.</span>查看所有包的版本	<span class="token operator">--</span> npm list
查看指定包的版本 npm list moduleName
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">4.</span>查看某个模块的信息  <span class="token operator">--</span>  npm info moduleName
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">5.</span>指定下载某个模块的版本 <span class="token operator">--</span> npm install moduleName@版本号
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">6.</span>安装全局模块和局部模块

npm install moduleName <span class="token operator">-</span>g  全局

npm uninstall moduleName <span class="token operator">-</span>g 全局卸载

npm install moduleName   局部安装<span class="token operator">/</span>安装在当前目录下

npm uninstall moduleName  局部卸载
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">7.</span>初始化 pakeage<span class="token punctuation">.</span>json

npm init

只能在英文的目录下成功运行！所以，项目文件夹的名称一定要使用英文命名，不要使用中文，不能出现空格
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="包的语义化版本规范"><a href="#包的语义化版本规范" class="header-anchor">#</a> 包的语义化版本规范</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>包的版本号是以“点分十进制”形式进行定义的，总共有三位数字，例如 <span class="token number">2.24</span><span class="token number">.0</span>

其中每一位数字所代表的的含义如下：
第<span class="token number">1</span>位数字：大版本
第<span class="token number">2</span>位数字：功能版本
第<span class="token number">3</span>位数字：Bug修复版本

版本号提升的规则：只要前面的版本号增长了，则后面的版本号归零
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="包管理配置文件"><a href="#包管理配置文件" class="header-anchor">#</a> 包管理配置文件</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token string">'node_modules'</span> 和 <span class="token string">'package-lock.json'</span>

初次装包完成后，在项目文件夹下多一个叫做 <span class="token string">'node_modules'</span> 的文件夹和 <span class="token string">'package-lock.json'</span> 的配置文件

<span class="token string">'node_modules'</span> 文件夹用来存放所有已安装到项目中的包。<span class="token string">'require()'</span> 导入第三方包时，就是从这个目录中查找并加载包。
<span class="token string">'package-lock.json'</span> 配置文件用来记录 <span class="token string">'node_modules'</span> 目录下的每一个包的下载信息，例如包的名字、版本号、下载地址等。

<span class="token string">'不要手动修改 node_modules 或 package-lock.json 文件中的任何代码，npm 包管理工具会自动维护它们。'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token string">'package.json'</span>

可通过 <span class="token string">'npm init'</span> 快速创建

npm 规定，在项目根目录中，必须提供一个叫做 <span class="token string">'package.json'</span> <span class="token literal-property property">的包管理配置文件。用来记录与项目有关的一些配置信息</span><span class="token operator">:</span>
项目的名称、版本号、描述等
项目中都用到了哪些包
哪些包只在开发期间会用到
那些包在开发和部署时都需要用到

<span class="token string">'package.json'</span> 文件中，有一个 <span class="token string">'dependencies'</span> 节点，记录开发和项目上线之后都需要用到的包
<span class="token string">'在项目开发中，一定要把 node_modules 文件夹，添加到 .gitignore 忽略文件中'</span>

<span class="token string">'package.json'</span> 文件中，有一个 <span class="token string">'devDependencies'</span> 节点<span class="token punctuation">,</span>记录只在项目开发阶段会用到，在项目上线之后不会用到的包
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="解决下包速度慢的问题"><a href="#解决下包速度慢的问题" class="header-anchor">#</a> 解决下包速度慢的问题</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token constant">CNPM</span>是<span class="token constant">NPM</span>国内的镜像服务器，下载模块速度更快

<span class="token constant">NPM</span>转淘宝镜像<span class="token constant">CNPM</span>  <span class="token string">&quot;npm i -g cnpm --registry=https://registry.npm.taobao.org&quot;</span>
<span class="token constant">NPM</span>转默认镜像<span class="token constant">NPM</span> <span class="token string">'npm config set registry https://registry.npmjs.org/'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>查看当前下包镜像源	npm cofig <span class="token keyword">get</span> registry
切换下包镜像源		  npm cofig <span class="token keyword">set</span> registry<span class="token operator">=</span><span class="token string">'url'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>为了更方便的切换下包的镜像源，我们可以安装 <span class="token string">'nrm'</span> 这个小工具，利用 nrm 提供的终端命令，可以快速查看和切换下包的镜像

全局安装	npm i nrm <span class="token operator">-</span>g
查看所有可用镜像源 nrm ls
切换镜像源	nrm use <span class="token string">'name'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="包的分类"><a href="#包的分类" class="header-anchor">#</a> 包的分类</h3> <div class="language-jsxx line-numbers-mode"><pre class="language-text"><code>使用 npm 包管理工具下载的包，共分为两大类，分别是： 项目包 全局包
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>项目包

那些被安装到项目的 node_modules 目录中的包，都是项目包。

项目包又分为两类，分别是：
开发依赖包（被记录到 devDependencies 节点中的包，只在开发期间会用到）
核心依赖包（被记录到 dependencies 节点中的包，在开发期间和项目上线之后都会用到<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>全局包

在执行 npm install 命令时，如果提供了 <span class="token operator">-</span>g 参数，则会把包安装为全局包。
全局包会被安装到 全局安装的 储存位置。
<span class="token string">'只有工具性质的包，才有全局安装的必要性。因为它们提供了好用的终端命令。'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="i5ting-toc"><a href="#i5ting-toc" class="header-anchor">#</a> i5ting_toc</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>i5ting_toc 是一个可以把 md 文档转为 html 页面的小工具 npm i <span class="token operator">-</span>g i5ting_toc

<span class="token comment">//调用 i5ting_toc md  转 html </span>
i5ting_toc <span class="token operator">-</span>f <span class="token string">'url'</span> <span class="token operator">-</span>o
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="规范的包结构"><a href="#规范的包结构" class="header-anchor">#</a> 规范的包结构</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>一个规范的包，它的组成结构，必须符合以下 <span class="token number">3</span> 点要求：

<span class="token number">1.</span>包必须以单独的目录而存在
<span class="token number">2.</span>包的顶级目录下要必须包含 <span class="token keyword">package</span><span class="token punctuation">.</span>json 这个包管理配置文件
<span class="token number">3</span><span class="token punctuation">.</span>package<span class="token punctuation">.</span>json 中必须包含 name，version，main 这三个属性，分别代表包的名字、版本号、包的入口。

以上 <span class="token number">3</span> 点要求是一个规范的包结构必须遵守的格式，关于更多的约束，可以参考如下网址：
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>yarnpkg<span class="token punctuation">.</span>com<span class="token operator">/</span>zh<span class="token operator">-</span>Hans<span class="token operator">/</span>docs<span class="token operator">/</span><span class="token keyword">package</span><span class="token operator">-</span>json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="开发属于自己的包"><a href="#开发属于自己的包" class="header-anchor">#</a> 开发属于自己的包</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>bilibili<span class="token punctuation">.</span>com<span class="token operator">/</span>video<span class="token operator">/</span>BV1a34y167AZ<span class="token operator">?</span>p<span class="token operator">=</span><span class="token number">32</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="nodemon"><a href="#nodemon" class="header-anchor">#</a> nodemon</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>在编写调试 Node<span class="token punctuation">.</span>js 项目的时候，如果修改了项目的代码，则需要频繁的手动 close 掉，然后再重新启动，非常繁琐。
现在，我们可以使用 nodemon（<span class="token string">'https://www.npmjs.com/package/nodemon'</span>） 这个工具，它能够监听项目文件
的变动，当代码被修改后，nodemon 会自动帮我们重启项目，极大方便了开发和调试。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>安装 npm i <span class="token operator">-</span>g nodemon
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>使用

以将 node 命令替换为 nodemon 命令，使用 nodemon index<span class="token punctuation">.</span>js 来启动项目
代码被修改之后，会被 nodemon 监听到，从而实现自动重启项目的效果

nodemon index
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="express"><a href="#express" class="header-anchor">#</a> Express</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Express 的中文官网： http<span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">www.expressjs.com.cn</span><span class="token regex-delimiter">/</span></span>

Express 是基于 Node<span class="token punctuation">.</span>js 平台，快速、开放、极简的 Web 开发框架。

通俗的理解：Express 的作用和 Node<span class="token punctuation">.</span>js 内置的 http 模块类似，是专门用来创建 Web 服务器的。
Express 的本质：就是一个 npm 上的第三方包，提供了快速创建 Web 服务器的便捷方法。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>http 内置模块与 Express 的关系

http 内置模块用起来很复杂，开发效率低，Express 是基于内置的 http 模块进一步封装出来的，能够极大的提高开发效率。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Express的作用

对于前端程序员来说，最常见的两种服务器，分别是：
Web 网站服务器：专门对外提供 Web 网页资源的服务器。
<span class="token constant">API</span> 接口服务器：专门对外提供 <span class="token constant">API</span> 接口的服务器。
使用 Express，我们可以方便、快速的创建 Web 网站的服务器或 <span class="token constant">API</span> 接口的服务器。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="express-的基本使用"><a href="#express-的基本使用" class="header-anchor">#</a> Express 的基本使用</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>npm install express <span class="token operator">--</span>save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="创建基本的-web-服务器-2"><a href="#创建基本的-web-服务器-2" class="header-anchor">#</a> 创建基本的 Web 服务器</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>index<span class="token punctuation">.</span>js

<span class="token comment">// 1.导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 2.创建 web 服务器</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4.写业务逻辑...</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> app<span class="token punctuation">.</span>post
<span class="token comment">// 3.调用 listen(端口号,callback) 启动服务器</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1：3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="监听-get-请求"><a href="#监听-get-请求" class="header-anchor">#</a> 监听 GET 请求</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>通过 app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，可以监听客户端的 <span class="token constant">GET</span> 请求

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">/*处理操作*/</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

url：客户端去请求的url地址
req：请求对象
res：响应对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="监听-post-请求"><a href="#监听-post-请求" class="header-anchor">#</a> 监听 POST 请求</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>通过 app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，可以监听客户端的 <span class="token constant">GET</span> 请求

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token comment">/*处理操作*/</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

url：客户端去请求的url地址
req：请求对象
res：响应对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="把内容响应给客户端"><a href="#把内容响应给客户端" class="header-anchor">#</a> 把内容响应给客户端</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>通过 res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法，可以把处理好的内容，发送给客户端

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'zhangsan'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="获取-url-中携带的参数"><a href="#获取-url-中携带的参数" class="header-anchor">#</a> 获取 URL 中携带的参数</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>通过 req<span class="token punctuation">.</span>query 对象，可以访问到客户端通过查询字符串的形式，发送到服务器的参数

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token string">'默认情况下，req.query 是一个空对象'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>通过 req<span class="token punctuation">.</span>params 对象，可以访问到 <span class="token constant">URL</span> <span class="token literal-property property">中，通过</span> <span class="token operator">:</span> 匹配到的动态参数

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index:id'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

访问 <span class="token string">'http://127.0.0.1:3000/index:45'</span> 得到 <span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;:45&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="托管静态资源"><a href="#托管静态资源" class="header-anchor">#</a> 托管静态资源</h3> <h4 id="express-static"><a href="#express-static" class="header-anchor">#</a> express.static()</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>express 提供了一个非常好用的函数，叫做 express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，通过它，可以非常方便地创建一个静态资源服务器

例如，通过如下代码就可以将 <span class="token keyword">public</span> 目录下的 images、<span class="token constant">CSS</span>、js 文件夹 对外开放访问了
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>images<span class="token operator">/</span>bg<span class="token punctuation">.</span>jpg
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>css<span class="token operator">/</span>style<span class="token punctuation">.</span>css
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>js<span class="token operator">/</span>login<span class="token punctuation">.</span>js

可以用 <span class="token keyword">public</span> 做为前缀来加载 <span class="token keyword">public</span> 文件夹下的文件
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/public'</span><span class="token punctuation">,</span> express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token string">'Express 在指定的静态目录中查找文件，并对外提供资源的访问路径。因此，存放静态文件的目录名不会出现在 URL 中。'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="托管多个静态资源目录"><a href="#托管多个静态资源目录" class="header-anchor">#</a> 托管多个静态资源目录</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>如果要托管多个静态资源目录，请多次调用 express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'files'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

访问静态资源文件时，express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数会根据目录的添加顺序查找所需的文件。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="挂载路径前缀"><a href="#挂载路径前缀" class="header-anchor">#</a> 挂载路径前缀</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>如果希望在托管的静态资源访问路径之前，挂载路径前缀，则可以使用如下的方式

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/public'</span><span class="token punctuation">,</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span><span class="token keyword">public</span><span class="token operator">/</span>images<span class="token operator">/</span>bg<span class="token punctuation">.</span>jpg
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span><span class="token keyword">public</span><span class="token operator">/</span>css<span class="token operator">/</span>style<span class="token punctuation">.</span>css
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span><span class="token keyword">public</span><span class="token operator">/</span>js<span class="token operator">/</span>login<span class="token punctuation">.</span>js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="express-路由"><a href="#express-路由" class="header-anchor">#</a> Express 路由</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>广义上来讲，路由就是映射关系。
在 Express 中，路由指的是客户端的请求与服务器处理函数之间的映射关系。
<span class="token literal-property property">路由白话</span><span class="token operator">:</span>路由是针对不同请求的url<span class="token punctuation">,</span>处理不同的业务逻辑
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Express 中的路由分 <span class="token number">3</span> 部分组成，分别是 请求的类型、请求的<span class="token constant">URL</span>地址、处理函数

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="路由的匹配过程"><a href="#路由的匹配过程" class="header-anchor">#</a> 路由的匹配过程</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>每当一个请求到达服务器之后，需要先经过路由的匹配，只有匹配成功之后，才会调用对应的处理函数。
在匹配时，会按照路由的顺序进行匹配，如果请求类型和请求的 <span class="token constant">URL</span> 同时匹配成功，则 Express 会将这次请求，转
交给对应的函数进行处理。

<span class="token number">1.</span>按照定义的先后顺序进行匹配
<span class="token number">2.</span>请求类型和请求的<span class="token constant">URL</span>同时匹配成功，才会调用对应的处理函数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="最简单的路由"><a href="#最简单的路由" class="header-anchor">#</a> 最简单的路由</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>在 Express 中使用路由最简单的方式，就是把路由挂载到 app 上

<span class="token comment">// 挂载路由</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="模块化路由"><a href="#模块化路由" class="header-anchor">#</a> 模块化路由</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>为了方便对路由进行模块化的管理，Express 不建议将路由直接挂载到 app 上，而是推荐将路由抽离为单独的模块
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span>创建路由模块对应的 <span class="token punctuation">.</span>js 文件
<span class="token number">2.</span>调用 express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数创建路由对象
<span class="token number">3.</span>向路由对象上挂载具体的路由
<span class="token number">4.</span>使用 module<span class="token punctuation">.</span>exports 向外共享路由对象
<span class="token number">5.</span>使用 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数注册路由模块
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>创建路由模块 router<span class="token punctuation">.</span>js

<span class="token comment">// 导入 express</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token comment">// 创建路由对象</span>
<span class="token keyword">const</span> router  <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 挂载具体路由</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index/list'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 向外导出路由对象</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>注册路由模块 index<span class="token punctuation">.</span>js

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 导入路由模块</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span>
<span class="token comment">// 注册路由模块</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1：3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="为路由模块添加前缀"><a href="#为路由模块添加前缀" class="header-anchor">#</a> 为路由模块添加前缀</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>类似于托管静态资源时，为静态资源统一挂载访问前缀一样，路由模块添加前缀的方式也非常简单
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span>router<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="动态传值和获取方式"><a href="#动态传值和获取方式" class="header-anchor">#</a> 动态传值和获取方式</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>动态传值

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index/:id'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1：3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/index/:id'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1：3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

访问 <span class="token operator">==</span><span class="token operator">&gt;</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>index<span class="token operator">/</span><span class="token number">5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取动态传值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//获取get传值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//获取post传值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="express-中间件"><a href="#express-中间件" class="header-anchor">#</a> Express 中间件</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>中间件特指业务流程的中间处理环节
当一个请求到达 Express 的服务器之后，可以连续调用多个中间件，从而对这次请求进行预处理
中间件，本质上就是一个处理函数<span class="token punctuation">,</span>中间件函数的形参列表中，必须包含 next 参数
<span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 是实现多个中间件连续调用的关键，它表示把流转关系转交给下一个中间件或路由
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>中间件的作用

多个中间件之间，共享同一份 req 和 res。
基于这样的特性，我们可以在上游的中间件中，统一为 req 或 res 对象添加自定义的属性或方法，供下游的中间件或路由进行使用。

<span class="token number">1.</span>执行任何代码。
<span class="token number">2.</span>更改请求和响应对象。
<span class="token number">3.</span>结束请求<span class="token operator">-</span>响应周期。
<span class="token number">4.</span>调用堆栈中的下一个中间件。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="定义中间件"><a href="#定义中间件" class="header-anchor">#</a> 定义中间件</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  req<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zhangsan&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'最简单的中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="全局中间件"><a href="#全局中间件" class="header-anchor">#</a> 全局中间件</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>客户端发起的任何请求，到达服务器之后，都会触发的中间件，叫做全局中间件。
通过调用 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>中间件函数<span class="token punctuation">)</span>，即可定义一个全局生效的中间件

<span class="token string">&quot;app.use(path,callback) 中的 callback 既可以是router对象又可以是函数&quot;</span>
<span class="token string">&quot;app.get(path,callback) 中的 callback 只能是函数&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'最简单的中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//简化</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'最简单的中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>定义多个全局中间件

可以使用 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 连续定义多个全局中间件。客户端请求到达服务器之后，会按照中间件定义的先后顺序依次进行
调用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="局部中间件"><a href="#局部中间件" class="header-anchor">#</a> 局部中间件</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>不使用 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 定义的中间件，叫做局部中间件<span class="token punctuation">,</span>只在当前路由中生效
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>router<span class="token punctuation">.</span>js

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router  <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义中间件</span>
<span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'最简单的中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//这里调用</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index/list'</span><span class="token punctuation">,</span>middle<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功7878'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>定义多个局部中间件

可以在路由中，通过如下两种等价的方式，使用多个局部中间件

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index/list'</span><span class="token punctuation">,</span>middle1<span class="token punctuation">,</span>middle2<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功7878'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index/list'</span><span class="token punctuation">,</span><span class="token punctuation">[</span>middle1<span class="token punctuation">,</span>middle2<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功7878'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="中间件的使用注意事项"><a href="#中间件的使用注意事项" class="header-anchor">#</a> 中间件的使用注意事项</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span><span class="token string">'一定要在路由之前注册中间件'</span>
<span class="token number">2.</span>客户端发送过来的请求，可以连续调用多个中间件进行处理
<span class="token number">3.</span>执行完中间件的业务代码之后，不要忘记调用 <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数
<span class="token number">4.</span>为了防止代码逻辑混乱，调用 <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数后不要再写额外的代码
<span class="token number">5.</span>连续调用多个中间件时，多个中间件之间，共享 req 和 res 对象
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="中间件的分类"><a href="#中间件的分类" class="header-anchor">#</a> 中间件的分类</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Express 官方把常见的中间件用法，分成了 <span class="token number">5</span> 大类，分别是：

<span class="token number">1.</span> 应用级别的中间件
<span class="token number">2.</span> 路由级别的中间件
<span class="token number">3.</span> 错误级别的中间件
<span class="token number">4</span><span class="token punctuation">.</span>Express 内置的中间件
<span class="token number">5.</span>第三方的中间件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="应用级别的中间件"><a href="#应用级别的中间件" class="header-anchor">#</a> 应用级别的中间件</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>通过过 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 或 app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 或 app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>绑定到 app 实例上的中间件，叫做应用级别的中间件
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//应用级全局中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//应用级局部中间件</span>
<span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/index/list'</span><span class="token punctuation">,</span>middle<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="路由级别的中间件"><a href="#路由级别的中间件" class="header-anchor">#</a> 路由级别的中间件</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>绑定到 express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 实例上的中间件，叫做路由级别的中间件。
它的用法和应用级别中间件没有任何区别。只不过，应用级别中间件是绑定到 app 实例上，路由级别中间件绑定到 router 实例上。
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router  <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//路由级 中间件</span>

<span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span>middle<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="错误级别的中间件"><a href="#错误级别的中间件" class="header-anchor">#</a> 错误级别的中间件</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>错误级别中间件的作用：专门用来捕获整个项目中发生的异常错误，从而防止项目异常崩溃的问题
错误级别中间件的 <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 处理函数中，必须有 <span class="token number">4</span> <span class="token function">个形参</span>  <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token string">&quot;错误级别的中间件，必须注册在所有路由之后！&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// 制造错误</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'服务器内部发生异常'</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'请求成功'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'发生了错误==&gt;'</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1:3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="express内置的中间件"><a href="#express内置的中间件" class="header-anchor">#</a> Express内置的中间件</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>自 Express <span class="token number">4.16</span><span class="token number">.0</span> 版本开始，Express 内置了 <span class="token number">3</span> 个常用的中间件，极大的提高了 Express 项目的开发效率和体验
<span class="token number">1</span><span class="token punctuation">.</span>express<span class="token punctuation">.</span>static 快速托管静态资源的内置中间件，例如： <span class="token constant">HTML</span> 文件、图片、<span class="token constant">CSS</span> 样式等（无兼容性）
<span class="token number">2</span><span class="token punctuation">.</span>express<span class="token punctuation">.</span>json 解析 <span class="token constant">JSON</span> 格式的请求体数据（有兼容性，仅在 <span class="token number">4.16</span><span class="token number">.0</span><span class="token operator">+</span> 版本中可用）
<span class="token number">3</span><span class="token punctuation">.</span>express<span class="token punctuation">.</span>urlencoded 解析 <span class="token constant">URL</span><span class="token operator">-</span>encoded 格式的请求体数据（有兼容性，仅在 <span class="token number">4.16</span><span class="token number">.0</span><span class="token operator">+</span> 版本中可用）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1：3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="第三方中间件"><a href="#第三方中间件" class="header-anchor">#</a> 第三方中间件</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>非 Express 官方内置的，而是由第三方开发出来的中间件，叫做第三方中间件

例如：在 express@<span class="token number">4.16</span><span class="token number">.0</span> 之前的版本中，经常使用 body<span class="token operator">-</span>parser 这个第三方中间件，来解析请求体数据
<span class="token number">1.</span>运行 npm install body<span class="token operator">-</span>parser 安装中间件
<span class="token number">2.</span>使用 require 导入中间件
<span class="token number">3.</span>调用 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 注册并使用中间件

<span class="token string">'Express 内置的 express.urlencoded 中间件，就是基于 body-parser 这个第三方中间件进一步封装出来的。'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>解析 multipart<span class="token operator">/</span>form<span class="token operator">-</span>data  格式的数据   
npm i multer
<span class="token comment">// 将文件类型的数据解析到req.file属性中</span>
<span class="token comment">// 将文本类型的数据解析到req.body属性中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>解析 url<span class="token operator">-</span>encoded 和 json 格式的数据 
npm i multer body<span class="token operator">-</span>parser
<span class="token comment">//解析的数据将会放在req.body中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> multer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;multer&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> upload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">dest</span><span class="token operator">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../uploads&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span>upload<span class="token punctuation">.</span><span class="token function">single</span><span class="token punctuation">(</span><span class="token string">&quot;imageName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1：3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h5 id="自定义中间件"><a href="#自定义中间件" class="header-anchor">#</a> 自定义中间件</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>模拟一个类似于 express<span class="token punctuation">.</span>urlencoded 这样的中间件，来解析 <span class="token constant">POST</span> 提交到服务器的表单数据。

<span class="token number">1.</span>定义中间件
<span class="token number">2.</span>监听 req 的 data 事件
<span class="token number">3.</span>监听 req 的 end 事件
<span class="token number">4.</span>使用 querystring 模块解析请求体数据
<span class="token number">5.</span>将解析出来的数据对象挂载为 req<span class="token punctuation">.</span>body
<span class="token number">6.</span>将自定义中间件封装为模块
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>myUse<span class="token punctuation">.</span>js <span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token comment">//导入处理 querystring 的内置模块</span>
<span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function-variable function">myUse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">//定义变量储存客户端发送的请求体</span>
   <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">''</span>
   <span class="token comment">//监听 req 对象 的 data 事件 （客户端发送新的请求体）</span>
   req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     str <span class="token operator">+=</span> chunk
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token comment">//监听 req 对象 的 end 事件 （请求体发送完成）</span>
   req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">//调用 qs 解析为对象</span>
     <span class="token keyword">let</span> body <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
     <span class="token comment">//挂载为 req.body 属性</span>
     req<span class="token punctuation">.</span>body <span class="token operator">=</span> body
     <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>index<span class="token punctuation">.</span>js <span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> myUse <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./myUse'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>myUse<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/index'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'expresss 启动成功 请访问 127.0.0.1：3000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="使用-express-写接口"><a href="#使用-express-写接口" class="header-anchor">#</a> 使用 Express 写接口</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span>创建基本服务器
<span class="token number">2.</span>创建路由模块
<span class="token number">3.</span>编写接口
<span class="token number">4.</span>引入使用
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>index<span class="token punctuation">.</span>js <span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//这里可以添加接口前缀</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务启动成功 请访问 http://127.0.0.1:3000/api/...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//编写 GET 接口</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router  <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/get'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'请求成功'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span>query
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//编写 POST 接口</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router  <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/post'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> body <span class="token operator">=</span> req<span class="token punctuation">.</span>body
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'请求成功'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span>body
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="响应头"><a href="#响应头" class="header-anchor">#</a> 响应头</h3> <h4 id="access-control-allow-origin"><a href="#access-control-allow-origin" class="header-anchor">#</a> Access-Control-Allow-Origin</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>响应头部中可以携带一个 <span class="token string">'Access-Control-Allow-Origin'</span> 字段<span class="token punctuation">,</span> 参数的值 指定了允许访问该资源的外域 <span class="token constant">URL</span>

例如<span class="token punctuation">,</span>下面的字段值将只允许来自 <span class="token string">'http://itcast.cn'</span> 的请求
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span><span class="token string">'http://itcast.cn'</span><span class="token punctuation">)</span>

如果指定了 <span class="token string">'Access-Control-Allow-Origin'</span> 字段的值为通配符 <span class="token operator">*</span>，表示允许来自任何域的请求
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="access-control-allow-headers"><a href="#access-control-allow-headers" class="header-anchor">#</a> Access-Control-Allow-Headers</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>设置请求头里面可以带那些属性，多个属性值用逗号隔开
默认情况下，<span class="token constant">CORS</span> 仅支持客户端向服务器发送如下的 <span class="token number">9</span> 个请求头：

Accept
Accept<span class="token operator">-</span>Language
Content<span class="token operator">-</span>Language
<span class="token constant">DPR</span>
Downlink
Save<span class="token operator">-</span>Data
Viewport<span class="token operator">-</span>Width
Width
Content<span class="token operator">-</span>Type （值仅限于 text<span class="token operator">/</span>plain、multipart<span class="token operator">/</span>form<span class="token operator">-</span>data、application<span class="token operator">/</span>x<span class="token operator">-</span>www<span class="token operator">-</span>form<span class="token operator">-</span>urlencoded 三者之一）

如果客户端向服务器发送了额外的请求头信息，则需要在服务器端，通过 <span class="token string">'Access-Control-Allow-Headers'</span> 对额外的请求头进行声明，否则这次请求会失败！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 允许客户端额外向服务端发送 Content-Type 和 X-Custom-Headers 请求头</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span><span class="token string">'X-Custom-Headers'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="access-control-allow-methods"><a href="#access-control-allow-methods" class="header-anchor">#</a> Access-Control-Allow-Methods</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>默认情况下，<span class="token constant">CORS</span> 仅支持客户端发起 <span class="token constant">GET</span>、<span class="token constant">POST</span>、<span class="token constant">HEAD</span> 请求。put支持
如果客户端希望通过 <span class="token constant">PUT</span>、<span class="token constant">DELETE</span> 等方式请求服务器的资源，则需要在服务器端，通过 <span class="token string">'Access-Control-Alow-Methods'</span> 来指明实际请求所允许使用的 <span class="token constant">HTTP</span> 方法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 只允许 GET、POST、HEAD 请求</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span><span class="token string">'GET'</span><span class="token punctuation">,</span><span class="token string">'POST'</span><span class="token punctuation">,</span><span class="token string">'HEAD'</span><span class="token punctuation">)</span>

<span class="token comment">// 允许所有请求</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="access-control-allow-credentials"><a href="#access-control-allow-credentials" class="header-anchor">#</a> Access-Control-Allow-Credentials</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>是否允许携带cookie，如果不设置，即使前端带了，服务端也接收不到

res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="access-control-max-age"><a href="#access-control-max-age" class="header-anchor">#</a> Access-Control-Max-Age</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>多久校验一下域名，单位秒

res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Max-Age&quot;</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="access-control-expose-headers"><a href="#access-control-expose-headers" class="header-anchor">#</a> Access-Control-Expose-Headers</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>返回给前端得请求头里得那些属性是安全的，这样前端才能获取

res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Expose-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fileName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Expose-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="跨域资源共享"><a href="#跨域资源共享" class="header-anchor">#</a> 跨域资源共享</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>解决接口跨域问题的方案主要有两种

<span class="token number">1.</span><span class="token constant">CORS</span>	<span class="token punctuation">(</span>主流的解决方案，推荐使用<span class="token punctuation">)</span>
<span class="token number">2.</span><span class="token constant">JSONP</span>	<span class="token punctuation">(</span>有缺陷的解决方案：只支持 <span class="token constant">GET</span> 请求<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="cors"><a href="#cors" class="header-anchor">#</a> CORS</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token constant">CORS</span> （Cross<span class="token operator">-</span>Origin Resource Sharing，跨域资源共享）由一系列 <span class="token constant">HTTP</span> 响应头组成，这些 <span class="token constant">HTTP</span> 响应头决定浏览器是否阻止前端 <span class="token constant">JS</span> 代码跨域获取资源。
浏览器的同源安全策略默认会阻止网页“跨域”获取资源。但如果接口服务器配置了 <span class="token constant">CORS</span> 相关的 <span class="token constant">HTTP</span> 响应头，就可以解除浏览器端的跨域访问限制。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>cors 是 Express 的一个第三方中间件。通过安装和配置 cors 中间件，可以很方便地解决跨域问题。
使用步骤分为如下 <span class="token number">3</span> 步：

<span class="token number">1.</span>安装 npm install cors
<span class="token number">2.</span>导入 <span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
<span class="token number">3.</span><span class="token string">&quot;在路由之前&quot;</span>调用 app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 配置中间件

<span class="token string">&quot;CORS 主要在服务器端进行配置。客户端浏览器无须做任何额外的配置，即可请求开启了 CORS 的接口&quot;</span>
<span class="token string">&quot;CORS 在浏览器中有兼容性。只有支持 XMLHttpRequest Level2 的浏览器，才能正常访问开启了 CORS 的服务端接口（例如：IE10+、Chrome4+、FireFox3.5+）&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h5 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>index<span class="token punctuation">.</span>js <span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router.js'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务启动成功 请访问 http://127.0.0.1:3000/api/...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>router <span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/get'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'请求成功'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span>query
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/post'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> body <span class="token operator">=</span> req<span class="token punctuation">.</span>body
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">'请求成功'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span>body
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:3000/api/get'</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;张三&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://127.0.0.1:3000/api/post'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;张三&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="cors请求的分类"><a href="#cors请求的分类" class="header-anchor">#</a> CORS请求的分类</h5> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>客户端在请求 <span class="token constant">CORS</span> 接口时，根据请求方式和请求头的不同，可以将 <span class="token constant">CORS</span> 的请求分为两大类  
<span class="token number">1.</span>简单请求
<span class="token number">2.</span>预检请求
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>简单请求

同时满足以下两大条件的请求，就属于简单请求：
<span class="token number">1.</span>请求方式：<span class="token constant">GET</span>、<span class="token constant">POST</span>、<span class="token constant">HEAD</span> 三者之一
<span class="token number">2.</span><span class="token constant">HTTP</span> 头部信息不超过以下几种字段：
无自定义头部字段、
Accept、
Accept<span class="token operator">-</span>Language、
Content<span class="token operator">-</span>Language、
<span class="token constant">DPR</span>、
Downlink、
Save<span class="token operator">-</span>Data、
Viewport<span class="token operator">-</span>Width、
Width 、
Content<span class="token operator">-</span>Type （值仅限于 text<span class="token operator">/</span>plain、multipart<span class="token operator">/</span>form<span class="token operator">-</span>data、application<span class="token operator">/</span>x<span class="token operator">-</span>www<span class="token operator">-</span>form<span class="token operator">-</span>urlencoded 三者之一）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code> 预检请求

只要符合以下任何一个条件的请求，都需要进行预检请求：
<span class="token number">1.</span>请求方式为 <span class="token constant">GET</span>、<span class="token constant">POST</span>、<span class="token constant">HEAD</span> 之外的请求 Method 类型
<span class="token number">2.</span>请求头中包含自定义头部字段
<span class="token number">3.</span>向服务器发送了 application<span class="token operator">/</span>json 格式的数据

在浏览器与服务器正式通信之前，浏览器会先发送 <span class="token constant">OPTION</span> 请求进行预检，以获知服务器是否允许该实际请求，所以这一次的 <span class="token constant">OPTION</span> 请求称为“预检请求”。服务器成功响应预检请求后，才会发送真正的请求，并且携带真实数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>简单请求和预检请求的区别

简单请求的特点：客户端与服务器之间只会发生一次请求。
预检请求的特点：客户端与服务器之间会发生两次请求，<span class="token constant">OPTION</span> 预检请求成功之后，才会发起真正的请求。

谷歌无法显现，使用火狐
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> JSONP</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>概念：浏览器端通过 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 标签的 src 属性，请求服务器上的数据，同时，服务器返回一个函数的调用。这种请求数据的方式叫做 JSONP。

1.JSONP 不属于真正的 Ajax 请求，因为它没有使用 XMLHttpRequest 这个对象。
2.JSONP 仅支持 GET 请求，不支持 POST、PUT、DELETE 等请求
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>实现 <span class="token constant">JSONP</span> 接口的步骤

<span class="token number">1.</span>获取客户端发送过来的回调函数的名字
<span class="token number">2.</span>得到要通过 <span class="token constant">JSONP</span> 形式发送给客户端的数据
<span class="token number">3.</span>根据前两步得到的数据，拼接出一个函数调用的字符串
<span class="token number">4.</span>把上一步拼接得到的字符串，响应给客户端的 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 标签进行解析执行

'如果项目中已经配置了 CORS 跨域资源共享，为了防止冲突，必须在配置 CORS 中间件之前声明 JSONP 的接口。否则JSONP 接口会被处理成开启了 CORS 的接口'
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>jsonp<span class="token punctuation">.</span>js <span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> jsonp <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

jsonp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/jsonp'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> funNmae <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback
  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> scriptStr <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>funNmae<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>scriptStr<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> jsonp
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>index<span class="token punctuation">.</span>js <span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> jsonp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./jsonp'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span>jsonp<span class="token punctuation">)</span>

<span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router.js'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'服务启动成功 请访问 http://127.0.0.1:3000/api/...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'http://127.0.0.1:3000/api/jsonp'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dataType</span><span class="token operator">:</span><span class="token string">'jsonp'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="操作-mysql"><a href="#操作-mysql" class="header-anchor">#</a> 操作 MySQL</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span>安装操作 MySQL 数据库的第三方模块（mysql）
<span class="token number">2.</span> 通过 mysql 模块连接到 MySQL 数据库
<span class="token number">3.</span>通过 mysql 模块执行 <span class="token constant">SQL</span> 语句

mysql 模块是托管于 npm 上的第三方模块。它提供了在 Node<span class="token punctuation">.</span>js 项目中连接和操作 MySQL 数据库的能力 <span class="token string">&quot;npm install mysql&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>配置mysql模块 db<span class="token punctuation">.</span>js<span class="token operator">==</span><span class="token operator">&gt;</span>

<span class="token comment">// 导入mysql模块</span>
<span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mysql'</span><span class="token punctuation">)</span>
<span class="token comment">// 建立与MySQL的连接</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span> <span class="token comment">//数据库的 ip 地址</span>
  <span class="token literal-property property">user</span><span class="token operator">:</span><span class="token string">'root'</span><span class="token punctuation">,</span>      <span class="token comment">//登陆数据库账号</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span><span class="token string">'123456'</span><span class="token punctuation">,</span><span class="token comment">//登陆数据库密码</span>
  <span class="token literal-property property">database</span><span class="token operator">:</span><span class="token string">'place_gather'</span><span class="token punctuation">,</span><span class="token comment">//指定的数据库</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 测试是否正常 工作</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'select 1'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ RowDataPacket { '1': 1 } ] 正确结果</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token string">'select 1'</span> 没有任何实际的意义，只是测试
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>调用 db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 函数，指定要执行的 <span class="token constant">SQL</span> 语句，通过回调函数拿到执行的结果
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="查询数据"><a href="#查询数据" class="header-anchor">#</a> 查询数据</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'select * from user_table'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 得到数组</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 插入表中的数据对象</span>
<span class="token keyword">const</span> userObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">'textname'</span><span class="token punctuation">,</span><span class="token literal-property property">password</span><span class="token operator">:</span><span class="token string">'textpass'</span><span class="token punctuation">}</span>
<span class="token comment">// 待执行的 SQL 语句, ? 表示占位符</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">&quot;insert into user_table (userName,passWord) value (?,?)&quot;</span>
<span class="token comment">// 以数组的形式给占位符赋值</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span><span class="token punctuation">[</span>userObj<span class="token punctuation">.</span>username<span class="token punctuation">,</span>userObj<span class="token punctuation">.</span>password<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 插入成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>向表中新增数据时，如果数据对象的每个属性和数据表的字段一一对应，则可以通过如下方式快速插入数据

<span class="token comment">// 插入表中的数据对象</span>
<span class="token keyword">const</span> userObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">'textname'</span><span class="token punctuation">,</span><span class="token literal-property property">password</span><span class="token operator">:</span><span class="token string">'textpass'</span><span class="token punctuation">}</span>
<span class="token comment">// 待执行的 SQL 语句, ? 表示占位符</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">&quot;insert into user_table set ?&quot;</span>
<span class="token comment">// 直接将对象作为占位符的值</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span>userObj<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 插入成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="更新数据"><a href="#更新数据" class="header-anchor">#</a> 更新数据</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 要更新的数据对象</span>
<span class="token keyword">const</span> userObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'hjp233'</span><span class="token punctuation">,</span><span class="token literal-property property">passWord</span><span class="token operator">:</span><span class="token string">'123456'</span><span class="token punctuation">}</span>
<span class="token comment">// 待执行的 SQL 语句, ? 表示占位符</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">&quot;update  user_table set userName=?,passWord=? where userId=?&quot;</span>
<span class="token comment">// 以数组的形式给占位符赋值</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span><span class="token punctuation">[</span>userObj<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>userObj<span class="token punctuation">.</span>passWord<span class="token punctuation">,</span>userObj<span class="token punctuation">.</span>userId<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 更新成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>向表中更新数据时，如果数据对象的每个属性和数据表的字段一一对应，则可以通过如下方式快速插入数据

<span class="token comment">// 要更新的数据对象</span>
<span class="token keyword">const</span> userObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token literal-property property">userName</span><span class="token operator">:</span><span class="token string">'hjp556'</span><span class="token punctuation">,</span><span class="token literal-property property">passWord</span><span class="token operator">:</span><span class="token string">'123456'</span><span class="token punctuation">}</span>
<span class="token comment">// 待执行的 SQL 语句, ? 表示占位符</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">&quot;update  user_table set ? where userId=?&quot;</span>
<span class="token comment">// 以数组的形式给占位符赋值</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span><span class="token punctuation">[</span>userObj<span class="token punctuation">,</span>userObj<span class="token punctuation">.</span>userId<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 更新成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 待执行的 SQL 语句, ? 表示占位符</span>
<span class="token keyword">const</span> sqlStr <span class="token operator">=</span> <span class="token string">&quot;delete from user_table where userId = ?;&quot;</span>
<span class="token comment">// 如果 SQL 语句 中只有一个占位符可以省略数组直接赋值</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sqlStr<span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 删除成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>标记删除

使用 <span class="token string">&quot;delete&quot;</span> 语句，会把真正的把数据从表中删除掉。为了保险起见，推荐使用标记删除的形式，来模拟删除的动作。
所谓的标记删除，就是在表中设置类似于 <span class="token string">&quot;status&quot;</span> 这样的状态字段，来标记当前这条数据是否被删除。
当用户执行了删除的动作时，我们并没有执行 <span class="token string">&quot;delete&quot;</span> 语句把数据删除掉，而是执行了 <span class="token string">&quot;update&quot;</span> 语句，将这条数据对应的 <span class="token string">&quot;status&quot;</span> 字段标记为删除即可。

<span class="token comment">// 标记删除 使用 update 代替 delete，只更新数据的状态，并没有真正的删除</span>
db<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">'update  user_table set status=1 where userId=?'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>affectedRows<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 删除成功</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="express-cli"><a href="#express-cli" class="header-anchor">#</a> Express-cli</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>通过应用生成器工具 express<span class="token operator">-</span>generator 可以快速创建一个应用的骨架。
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>expressjs<span class="token punctuation">.</span>com<span class="token punctuation">.</span>cn<span class="token operator">/</span>starter<span class="token operator">/</span>generator<span class="token punctuation">.</span>html

全局安装	npm install express<span class="token operator">-</span>generator <span class="token operator">-</span>g
查看版本 	express <span class="token operator">-</span>h	<span class="token operator">||</span> express <span class="token operator">-</span>v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="项目配置热启动工具"><a href="#项目配置热启动工具" class="header-anchor">#</a> 项目配置热启动工具</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>下载热启动工具	npm install nodemon <span class="token operator">--</span>save

在 <span class="token keyword">package</span><span class="token punctuation">.</span>json 文件中把 node 改成 nodemon

<span class="token punctuation">{</span>
    <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cake&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon ./bin/www&quot;</span>    <span class="token comment">// 把node改成nodemon </span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;cookie-parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~1.4.4&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;debug&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~2.6.9&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;ejs&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~2.6.1&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;express&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~4.16.1&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;http-errors&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~1.6.3&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;morgan&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~1.9.1&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;nodemon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.4&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="结构"><a href="#结构" class="header-anchor">#</a> 结构</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>    <span class="token operator">-</span> bin                 启动项目目录
        <span class="token operator">-</span> www
    <span class="token operator">-</span> node_modules        下载依赖项目目录
    <span class="token operator">-</span> <span class="token keyword">public</span>              静态资源公共目录  （图片<span class="token punctuation">,</span>js<span class="token punctuation">,</span>css<span class="token punctuation">,</span>html）
    <span class="token operator">-</span> routes              项目路由目录
    <span class="token operator">-</span> view                项目的模板引擎
    <span class="token operator">-</span> app<span class="token punctuation">.</span>js              项目全局的js
    <span class="token operator">-</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json        项目的配置项
    
<span class="token string">'view 里的 html 只能通过路由去渲染访问'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="把模板引擎改成-html"><a href="#把模板引擎改成-html" class="header-anchor">#</a> 把模板引擎改成 html</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span>下载ejs   cnpm<span class="token operator">/</span>npm install ejs <span class="token operator">--</span>save

如果你刚开始创建项目的时候用的就是ejs模板引擎，就不需再下载，默认是jade模板引擎的话，需要先卸载jade模块 <span class="token string">&quot;cnpm/npm uninstall jade&quot;</span> <span class="token punctuation">,</span> 然后在安装ejs模板引擎
 

<span class="token number">2.</span>找到app<span class="token punctuation">.</span>js<span class="token punctuation">,</span>修改以下的代码，把模板引擎换成html，这样就可以使用html写页面了

view engine setup  设置模板引擎

<span class="token comment">// 新引入的ejs插件</span>
<span class="token keyword">var</span> ejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span><span class="token operator">--</span>第一步
<span class="token comment">// 设置模板所在的目录</span>
app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'views'</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'views'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置模板引擎</span>
app<span class="token punctuation">.</span><span class="token function">engine</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">,</span>ejs<span class="token punctuation">.</span>__express<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span><span class="token operator">-</span>第二步

app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">==</span><span class="token operator">&gt;</span> app<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'view engine'</span><span class="token punctuation">,</span> <span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">--</span><span class="token operator">-</span>第三步

修改文件名后缀<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>第四步

重启服务<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>第五步
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="nodejs-连接mongodbs数据库"><a href="#nodejs-连接mongodbs数据库" class="header-anchor">#</a> NodeJS 连接mongodbs数据库</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token number">1.</span> 下载mongodb的模块  cnpm<span class="token operator">/</span>npm install mongodb <span class="token operator">--</span>save
<span class="token number">2.</span> 当前目录下新建一个文件夹 modules <span class="token punctuation">,</span>然后在这个文件夹下再新建一个 db<span class="token punctuation">.</span>js <span class="token punctuation">,</span>这个js封装了连接数据库，增删查改，并暴露出去
<span class="token number">3.</span>路由接收这个 db<span class="token punctuation">.</span>js <span class="token punctuation">,</span>并调用里面的方法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// 实例化mongodb数据库连接对象MongoClient</span>
<span class="token keyword">const</span> MongoClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MongoClient<span class="token punctuation">;</span>

<span class="token comment">// mongodb数据库配置项</span>
<span class="token keyword">const</span> <span class="token function-variable function">connectDB</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// mongodb数据库连接地址</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;mongodb://127.0.0.1:27017&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// mongodb数据库名</span>
    <span class="token keyword">const</span> dbName <span class="token operator">=</span> <span class="token string">&quot;cake&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用 connect 方法连接mongodb数据库</span>
    MongoClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">useUnifiedTopology</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb数据库连接成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
        <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span>dbName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span>db<span class="token punctuation">,</span>client<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// _id：ObjectId(&quot;5e6f61ac860bf5190058610d&quot;)  由于mongodb数据库的唯一id是这样的</span>
<span class="token keyword">const</span> objectId <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongodb'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ObjectId  <span class="token comment">//用这方法把里面的字符串取出来</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
    @暴露objectId
    @objectId 外部调用objectId使用示例  --&gt;  new db.objectId(&quot;_id&quot;)  id表示从前端页面传递过来的数据唯一id值
    */</span>
    <span class="token literal-property property">objectId</span><span class="token operator">:</span>objectId<span class="token punctuation">,</span>

    <span class="token comment">/*
    @暴露find查询方法
    @collectionName 集合名称
    @json json对象，默认为空对象{}
    */</span>    
    <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span>json</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        
            <span class="token function">connectDB</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>db<span class="token punctuation">,</span>client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span>collectionName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 返回集合中所有数据</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 关闭连接</span>
                        client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>                    
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/*
    @暴露findLimit查询方法
    @collectionName 集合名称
    @json json对象，默认为空对象{}
    @skip(n) n 代表具体第多少页
    @limit(m) m 代表每页有多少条数据
    */</span>    
    <span class="token function">findLimit</span><span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span>json<span class="token punctuation">,</span>n<span class="token punctuation">,</span>m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        
            <span class="token function">connectDB</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>db<span class="token punctuation">,</span>client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span>collectionName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span>n<span class="token operator">*</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 返回集合中所有数据</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 关闭连接</span>
                        client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>                    
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/*
    @暴露insert插入方法
    @collectionName 集合名称
    @json json对象，默认为空对象{}
    */</span>
    <span class="token function">insert</span><span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span>json</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
            <span class="token function">connectDB</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>db<span class="token punctuation">,</span>client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span>collectionName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 关闭连接</span>
                        client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">/*
    @暴露update更新方法
    @collectionName 集合名称
    @json1 条件 json对象
    @json2 更新 json对象
    */</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span>json1<span class="token punctuation">,</span>json2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
            <span class="token function">connectDB</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>db<span class="token punctuation">,</span>client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span>collectionName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span>json1<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span>json2<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 关闭连接</span>
                        client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">/*
    @暴露delete删除方法
    @collectionName 集合名称
    @json json对象，默认为空对象{}
    */</span>
    <span class="token keyword">delete</span><span class="token punctuation">(</span>collectionName<span class="token punctuation">,</span>json<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
            <span class="token function">connectDB</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>db<span class="token punctuation">,</span>client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span>collectionName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deleteOne</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 关闭连接</span>
                        client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token comment">// 外部调用db.js示例</span>

<span class="token comment">// express框架</span>

<span class="token comment">// router.post('/login', async (req, res) =&gt; {</span>
    
<span class="token comment">//     // 查询所有数据</span>
<span class="token comment">//     const result = await db.find('users',{});</span>

<span class="token comment">//     // 查询分页数据</span>
<span class="token comment">//     const result = await db.findLimit('users',{},5,5);</span>

<span class="token comment">//     // 插入单个数据</span>
<span class="token comment">//     const result = await db.insert('users',{username:&quot;zhangsan&quot;});</span>

<span class="token comment">//     // 更新单个数据</span>
<span class="token comment">//     const result = await db.update('users',{username:&quot;zhangsan&quot;},{age:30});</span>

<span class="token comment">//     // 删除单个数据</span>
<span class="token comment">//     const result = await db.delete('users',{username:&quot;zhangsan&quot;});</span>

<span class="token comment">//     res.json({</span>
<span class="token comment">//         code: 0,</span>
<span class="token comment">//         msg: '请求成功',</span>
<span class="token comment">//         data: result</span>
<span class="token comment">//     })</span>
    
<span class="token comment">// });</span>



<span class="token comment">// koa2框架</span>

<span class="token comment">// router.post('/login', async (ctx) =&gt; {</span>

<span class="token comment">//     const result = await db.find('users',{});</span>

<span class="token comment">//     ctx.body = {</span>
<span class="token comment">//         code: 0,</span>
<span class="token comment">//         msg: '请求成功',</span>
<span class="token comment">//         data: result</span>
<span class="token comment">//     }</span>

<span class="token comment">// })</span>


<span class="token comment">// MongoDB 中使用skip(n)和limit(m)方法 实现分页公式 db.集合.find({}).skip(n*m).limit(m)</span>
<span class="token comment">// skip(n) n 代表具体第多少页</span>
<span class="token comment">// limit(m) m 代表每页有多少条数据</span>

<span class="token comment">// db.集合.find({}).skip(n*m).limit(m)</span>

<span class="token comment">// 按index降序排列分页</span>
<span class="token comment">// db.集合.find({}).sort({&quot;index&quot;:-1}).skip(n*m).limit(m)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br></div></div><h2 id="web开发模式"><a href="#web开发模式" class="header-anchor">#</a> web开发模式</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>目前主流的 Web 开发模式有两种

<span class="token number">1.</span>基于服务端渲染的传统 Web 开发模式
<span class="token number">2.</span>基于前后端分离的新型 Web 开发模式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>服务端渲染的 Web 开发模式
服务端渲染的概念：服务器发送给客户端的 <span class="token constant">HTML</span> 页面，是在服务器通过字符串的拼接，动态生成的。因此，客户端不需要使用 Ajax 这样的技术额外请求页面的数据

服务端渲染的优缺点
优点：
<span class="token number">1.</span>前端耗时少。因为服务器端负责动态生成 <span class="token constant">HTML</span> 内容，浏览器只需要直接渲染页面即可。
<span class="token number">2.</span>有利于<span class="token constant">SEO</span>。因为服务器端响应的是完整的 <span class="token constant">HTML</span> 页面内容，所以爬虫更容易爬取获得信息，更有利于 <span class="token constant">SEO</span>。
缺点：
<span class="token number">1.</span>占用服务器端资源。即服务器端完成 <span class="token constant">HTML</span> 页面内容的拼接，如果请求较多，会对服务器造成一定的访问压力。
<span class="token number">2.</span>不利于前后端分离，开发效率低。使用服务器端渲染，则无法进行分工合作，尤其对于前端复杂度高的项目，不利于项目高效开发。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>前后端分离的 Web 开发模式
前后端分离的概念：前后端分离的开发模式，依赖于 Ajax 技术的广泛应用，后端只负责提供 <span class="token constant">API</span> 接口，前端使用 api调用接口获取数据的开发模式。

前后端分离的优缺点
优点：
<span class="token number">1.</span>开发体验好。前端专注于 <span class="token constant">UI</span> 页面的开发，后端专注于api 的开发，且前端有更多的选择性。
<span class="token number">2.</span>用户体验好。Ajax 技术的广泛应用，极大的提高了用户的体验，可以轻松实现页面的局部刷新。
<span class="token number">3.</span>减轻了服务器端的渲染压力。因为页面最终是在每个用户的浏览器中生成的。
缺点：
<span class="token number">1.</span>不利于 <span class="token constant">SEO</span>。因为完整的 <span class="token constant">HTML</span> 页面需要在客户端动态拼接完成，所以爬虫对无法爬取页面的有效信息。（解决方案：利用 Vue、React 等前端框架的 <span class="token constant">SSR</span> （server side render）技术能够很好的解决 <span class="token constant">SEO</span> 问题！）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>如何选择 Web 开发模式

不谈业务场景而盲目选择使用何种开发模式都是耍流氓。
<span class="token number">1.</span>比如企业级网站，主要功能是展示而没有复杂的交互，并且需要良好的 <span class="token constant">SEO</span>，则这时我们就需要使用服务器端渲染；
<span class="token number">2.</span>而类似后台管理项目，交互性比较强，不需要考虑 <span class="token constant">SEO</span>，那么就可以使用前后端分离的开发模式。

另外，具体使用何种开发模式并不是绝对的，为了同时兼顾了首页的渲染速度和前后端分离的开发效率，一些网站采用了首屏服务器端渲染 <span class="token operator">+</span> 其他页面前后端分离的开发模式
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="身份认证"><a href="#身份认证" class="header-anchor">#</a> 身份认证</h2> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>身份认证的目的，是为了确认当前所声称为某种身份的用户，确实是所声称的用户。对于服务端渲染和前后端分离这两种开发模式来说，分别有着不同的身份认证方案：
<span class="token number">1.</span>服务端渲染推荐使用 Session 认证机制 <span class="token operator">==</span><span class="token operator">&gt;</span> Cookie
<span class="token number">2.</span>前后端分离推荐使用 <span class="token constant">JWT</span> 认证机制
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="session-认证机制"><a href="#session-认证机制" class="header-anchor">#</a> Session 认证机制</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Cookie

Cookie 是存储在用户浏览器中的一段不超过 <span class="token number">4</span> <span class="token constant">KB</span> 的字符串。它由一个名称（Name）、一个值（Value）和其它几个用于控制 Cookie 有效期、安全性、使用范围的可选属性组成。
不同域名下的 Cookie 各自独立，每当客户端发起请求时，会自动把当前域名下所有未过期的 Cookie 一同发送到服务器。

Cookie的几大特性： 自动发送 域名独立 过期时限 4KB限制
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Cookie 在身份认证中的作用

客户端第一次请求服务器的时候，服务器通过响应头的形式，向客户端发送一个身份认证的 Cookie，客户端会自动将 Cookie 保存在浏览器中。随后，当客户端浏览器每次请求服务器的时候，浏览器会自动将身份认证相关的 Cookie，通过请求头的形式发送给服务器，服务器即可验明客户端的身份。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>Cookie 不具有安全性

由于 Cookie 是存储在浏览器中的，而且浏览器也提供了读写 Cookie 的 <span class="token constant">API</span>，因此 Cookie 很容易被伪造，不具有安全性。因此不建议服务器将重要的隐私数据，通过 Cookie 的形式发送给浏览器。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="express-中使用-session-认证"><a href="#express-中使用-session-认证" class="header-anchor">#</a> Express 中使用 Session 认证</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>在 Express 项目中，只需要安装 express<span class="token operator">-</span>session 中间件，即可在项目中使用 Session 认证
npm install express<span class="token operator">-</span>session

<span class="token string">&quot;express-session中间件将会话数据存储在服务器上；它仅将会话 ID 保存在 cookie 本身中，而不是会话数据&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-session'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">secret</span><span class="token operator">:</span><span class="token string">'str'</span><span class="token punctuation">,</span> <span class="token comment">//任意字符串</span>
  <span class="token literal-property property">resave</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//固定写法</span>
  <span class="token literal-property property">saveUninitialized</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//固定写法</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>向 session 中存数据
当 express<span class="token operator">-</span>session 中间件配置成功后，即可通过 req<span class="token punctuation">.</span>session 来访问和使用 session 对象，从而存储用户的关键信息

req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>user <span class="token operator">=</span> req<span class="token punctuation">.</span>body
req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>isLogin <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>从 session 中取数据	<span class="token operator">==</span><span class="token operator">&gt;</span>	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
清空 sessio	 <span class="token operator">==</span><span class="token operator">&gt;</span>	req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>b站 黑马<span class="token number">75</span>
老陈打码 肝一遍差不多了

先看 webPack
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间: </span> <span class="time">2022年12月8日星期四凌晨12点20分</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-6ea58682 data-v-6b17c4e2><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#node-js-简介" class="sidebar-link reco-side-node-js-简介" data-v-6ea58682>Node.js 简介</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#安装" class="sidebar-link reco-side-安装" data-v-6ea58682>安装</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#作用" class="sidebar-link reco-side-作用" data-v-6ea58682>作用</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#退出" class="sidebar-link reco-side-退出" data-v-6ea58682>退出</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-文件属性模块" class="sidebar-link reco-side-fs-文件属性模块" data-v-6ea58682>fs 文件属性模块</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-stat" class="sidebar-link reco-side-fs-stat" data-v-6ea58682>fs.stat()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-mkdir" class="sidebar-link reco-side-fs-mkdir" data-v-6ea58682>fs.mkdir()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-readfile" class="sidebar-link reco-side-fs-readfile" data-v-6ea58682>fs.readFile()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-writefile" class="sidebar-link reco-side-fs-writefile" data-v-6ea58682>fs.writeFile()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-模块-路径动态拼接的问题" class="sidebar-link reco-side-fs-模块-路径动态拼接的问题" data-v-6ea58682>fs 模块 - 路径动态拼接的问题</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-appendfile" class="sidebar-link reco-side-fs-appendfile" data-v-6ea58682>fs.appendFile()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#readdir" class="sidebar-link reco-side-readdir" data-v-6ea58682>readdir()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-rename" class="sidebar-link reco-side-fs-rename" data-v-6ea58682>fs.rename</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-rmdir" class="sidebar-link reco-side-fs-rmdir" data-v-6ea58682>fs.rmdir()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-unlink" class="sidebar-link reco-side-fs-unlink" data-v-6ea58682>fs.unlink()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#fs-copyfile" class="sidebar-link reco-side-fs-copyfile" data-v-6ea58682>fs.copyFile()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#同步异步" class="sidebar-link reco-side-同步异步" data-v-6ea58682>同步异步</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#path-文件路径模块" class="sidebar-link reco-side-path-文件路径模块" data-v-6ea58682>path 文件路径模块</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#path-join" class="sidebar-link reco-side-path-join" data-v-6ea58682>path.join()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#path-basename" class="sidebar-link reco-side-path-basename" data-v-6ea58682>path.basename()</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#path-extname" class="sidebar-link reco-side-path-extname" data-v-6ea58682>path.extname()</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#http-模块" class="sidebar-link reco-side-http-模块" data-v-6ea58682>http 模块</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#创建基本的-web-服务器" class="sidebar-link reco-side-创建基本的-web-服务器" data-v-6ea58682>创建基本的 web 服务器</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#req-请求对象" class="sidebar-link reco-side-req-请求对象" data-v-6ea58682>req 请求对象</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#res-响应对象" class="sidebar-link reco-side-res-响应对象" data-v-6ea58682>res 响应对象</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#解决中文乱码问题" class="sidebar-link reco-side-解决中文乱码问题" data-v-6ea58682>解决中文乱码问题</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#根据不同的-url-响应不同的-html-内容" class="sidebar-link reco-side-根据不同的-url-响应不同的-html-内容" data-v-6ea58682>根据不同的 url 响应不同的 html 内容</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#url-请求路径模块" class="sidebar-link reco-side-url-请求路径模块" data-v-6ea58682>url  请求路径模块</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#events模块" class="sidebar-link reco-side-events模块" data-v-6ea58682>Events模块</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#nodejs路由" class="sidebar-link reco-side-nodejs路由" data-v-6ea58682>NodeJS路由</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#模块化" class="sidebar-link reco-side-模块化" data-v-6ea58682>模块化</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#加载模块" class="sidebar-link reco-side-加载模块" data-v-6ea58682>加载模块</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#模块作用域" class="sidebar-link reco-side-模块作用域" data-v-6ea58682>模块作用域</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#向外共享模块作用域中的成员" class="sidebar-link reco-side-向外共享模块作用域中的成员" data-v-6ea58682>向外共享模块作用域中的成员</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#node-js-中的模块化规范" class="sidebar-link reco-side-node-js-中的模块化规范" data-v-6ea58682>Node.js 中的模块化规范</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#模块的加载机制" class="sidebar-link reco-side-模块的加载机制" data-v-6ea58682>模块的加载机制</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#目录作为模块" class="sidebar-link reco-side-目录作为模块" data-v-6ea58682>目录作为模块</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#npm包管理" class="sidebar-link reco-side-npm包管理" data-v-6ea58682>NPM包管理</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#命令" class="sidebar-link reco-side-命令" data-v-6ea58682>命令</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#包的语义化版本规范" class="sidebar-link reco-side-包的语义化版本规范" data-v-6ea58682>包的语义化版本规范</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#包管理配置文件" class="sidebar-link reco-side-包管理配置文件" data-v-6ea58682>包管理配置文件</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#解决下包速度慢的问题" class="sidebar-link reco-side-解决下包速度慢的问题" data-v-6ea58682>解决下包速度慢的问题</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#包的分类" class="sidebar-link reco-side-包的分类" data-v-6ea58682>包的分类</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#i5ting-toc" class="sidebar-link reco-side-i5ting-toc" data-v-6ea58682>i5ting_toc</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#规范的包结构" class="sidebar-link reco-side-规范的包结构" data-v-6ea58682>规范的包结构</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#开发属于自己的包" class="sidebar-link reco-side-开发属于自己的包" data-v-6ea58682>开发属于自己的包</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#nodemon" class="sidebar-link reco-side-nodemon" data-v-6ea58682>nodemon</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#express" class="sidebar-link reco-side-express" data-v-6ea58682>Express</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#express-的基本使用" class="sidebar-link reco-side-express-的基本使用" data-v-6ea58682>Express 的基本使用</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#托管静态资源" class="sidebar-link reco-side-托管静态资源" data-v-6ea58682>托管静态资源</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#express-路由" class="sidebar-link reco-side-express-路由" data-v-6ea58682>Express 路由</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#express-中间件" class="sidebar-link reco-side-express-中间件" data-v-6ea58682>Express 中间件</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#使用-express-写接口" class="sidebar-link reco-side-使用-express-写接口" data-v-6ea58682>使用 Express 写接口</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#响应头" class="sidebar-link reco-side-响应头" data-v-6ea58682>响应头</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#跨域资源共享" class="sidebar-link reco-side-跨域资源共享" data-v-6ea58682>跨域资源共享</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#操作-mysql" class="sidebar-link reco-side-操作-mysql" data-v-6ea58682>操作 MySQL</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#express-cli" class="sidebar-link reco-side-express-cli" data-v-6ea58682>Express-cli</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#项目配置热启动工具" class="sidebar-link reco-side-项目配置热启动工具" data-v-6ea58682>项目配置热启动工具</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#结构" class="sidebar-link reco-side-结构" data-v-6ea58682>结构</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#把模板引擎改成-html" class="sidebar-link reco-side-把模板引擎改成-html" data-v-6ea58682>把模板引擎改成 html</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#nodejs-连接mongodbs数据库" class="sidebar-link reco-side-nodejs-连接mongodbs数据库" data-v-6ea58682>NodeJS 连接mongodbs数据库</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#web开发模式" class="sidebar-link reco-side-web开发模式" data-v-6ea58682>web开发模式</a></li><li class="level-2" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#身份认证" class="sidebar-link reco-side-身份认证" data-v-6ea58682>身份认证</a></li><li class="level-3" data-v-6ea58682><a href="/blog-dist/node/09.Node.html#session-认证机制" class="sidebar-link reco-side-session-认证机制" data-v-6ea58682>Session 认证机制</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/blog-dist/assets/js/app.19fb868c.js" defer></script><script src="/blog-dist/assets/js/3.3680e638.js" defer></script><script src="/blog-dist/assets/js/1.8bc37690.js" defer></script><script src="/blog-dist/assets/js/145.b31bc4ce.js" defer></script>
  </body>
</html>
